(()=>{var _=Object.create;var a=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},u=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of g(t))!v.call(e,r)&&r!==n&&a(e,r,{get:()=>t[r],enumerable:!(s=S(t,r))||s.enumerable});return e};var c=(e,t,n)=>(n=e!=null?_(x(e)):{},u(t||!e||!e.__esModule?a(n,"default",{value:e,enumerable:!0}):n,e)),y=e=>u(a({},"__esModule",{value:!0}),e);var o=T((F,d)=>{d.exports=shelter.solidWeb});var R={};$(R,{onUnload:()=>H,settings:()=>P});var f=c(o(),1),l=c(o(),1),p=c(o(),1),E=c(o(),1),C=(0,f.template)('<iframe style="border: 0; width: 100%; max-width: 600px; aspect-ratio: 16/9" allow="fullscreen"></iframe>',2),{plugin:{store:i},observeDom:I,flux:{dispatcher:h,storesFlat:{SelectedChannelStore:w}},util:{reactFiberWalker:D,getFiber:G},ui:{Header:z,HeaderTags:M,TextBox:N}}=shelter;i.instance??="invidious.slipfox.xyz";var b=["MESSAGE_CREATE","MESSAGE_UPDATE","UPDATE_CHANNEL_DIMENSIONS"];function A(e){if(!i.instance||(e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE")&&e.message.channel_id!==w.getChannelId())return;let t=I('[id^="chat-messages-"] article:not([data-invidivizer])',n=>{n.dataset.invidivizer="1",t();let s=D(G(n),"embed",!0)?.memoizedProps?.embed?.url;if(typeof s!="string"||!s.startsWith("https://www.youtube.com"))return;let r=s.match(/v=([a-zA-Z0-9-_]+)/);r?.[1]&&(n.style.display="none",n.insertAdjacentElement("afterend",(()=>{let m=C.cloneNode(!0);return(0,E.effect)(()=>(0,p.setAttribute)(m,"src",`https://${i.instance}/embed/${r[1]}`)),m})()))});setTimeout(t,1e3)}for(let e of b)h.subscribe(e,A);function H(){for(let e of b)h.unsubscribe(e,A)}var P=()=>[(0,l.createComponent)(z,{get tag(){return M.H3},children:"Invidious Instance"}),(0,l.createComponent)(N,{placeholder:"my.instance.com",get value(){return i.instance},onInput:e=>i.instance=e})];return y(R);})();
