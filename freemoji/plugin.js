(()=>{var z=Object.create;var l=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),M=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},d=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of k(t))!H.call(e,s)&&s!==o&&l(e,s,{get:()=>t[s],enumerable:!(r=E(t,s))||r.enumerable});return e};var c=(e,t,o)=>(o=e!=null?z(K(e)):{},d(t||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e)),w=e=>d(l({},"__esModule",{value:!0}),e);var a=L((X,_)=>{_.exports=shelter.solidWeb});var Y={};M(Y,{onUnload:()=>R,settings:()=>T});var p=()=>shelter.flux.stores.UserStore.getCurrentUser(),i,f=()=>{i||(i=p().premiumType,p().premiumType=2)},m=()=>{i!==void 0&&(p().premiumType=i,i=void 0)};var{plugin:{store:h},flux:{stores:{SelectedGuildStore:F,EmojiStore:U}}}=shelter,W=()=>!!document.querySelector('[data-list-item-id="guildsnav___home"][class*="selected"]'),q=()=>Number.isSafeInteger(parseInt(h.size))?h.size:64,g=e=>{let t=[],o=[];for(let r of e){let s=[];for(let n of r.children){if(n.emoji){let u=U.getCustomEmojiById(n.emoji.emojiId);if(u.guildId!==F.getLastSelectedGuildId()||u.animated||W()){t.push(`${u.url.split("?")[0]}?size=${q()}`);continue}}s.push(n)}o.push({...r,children:s})}for(let r of t)o.push({type:"line",children:[{text:r}]});return o};var x=c(a()),S=c(a()),v=c(a()),I=c(a()),A=(0,x.template)('<input type="text" placeholder="64">',1),{plugin:{store:b},ui:{Header:B,HeaderTags:D}}=shelter,T=()=>[(0,I.createComponent)(B,{get tag(){return D.H3},children:"Emoji Size (defaults to 64 if invalid)"}),(()=>{let e=A.cloneNode(!0);return e.$$input=t=>b.value=t.target.value,(0,v.effect)(()=>e.value=b.size??""),e})()];(0,S.delegateEvents)(["input"]);var{flux:{dispatcher:$},plugin:{store:y},observeDom:j,util:{getFiber:G}}=shelter;y.size===void 0&&(y.size=64);function C(e){let t=(o,r)=>{if(e.event===o){f();let s=j(r,n=>{n.isConnected||(setTimeout(()=>m(),5e3),s())})}};t("expression_picker_opened","#emoji-picker-tab-panel"),t("channel_autocomplete_open","[class*=autocomplete]")}var N=!1,O=e=>{if(e.dataset.YSINK_FM)return;e.dataset.YSINK_FM="1";let o=G(e).child.pendingProps.editor;e.onkeydown=r=>{N||r.key==="Enter"&&!document.querySelector("[class*=autocomplete],[class*=attachedBars]")&&(o.children=g(o.children))}},P=j('[class*="slateContainer-"]',e=>{O(e)});$.subscribe("TRACK",C);var R=()=>{$.unsubscribe("TRACK",C),P(),N=!0};return w(Y);})();
