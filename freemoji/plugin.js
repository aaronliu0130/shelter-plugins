(()=>{var C=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),M=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})},f=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of k(t))!H.call(e,s)&&s!==r&&c(e,s,{get:()=>t[s],enumerable:!(o=E(t,s))||o.enumerable});return e};var l=(e,t,r)=>(r=e!=null?C(K(e)):{},f(t||!e||!e.__esModule?c(r,"default",{value:e,enumerable:!0}):r,e)),w=e=>f(c({},"__esModule",{value:!0}),e);var a=L((X,_)=>{_.exports=shelter.solidWeb});var Y={};M(Y,{onUnload:()=>R,settings:()=>T});var p=()=>shelter.flux.stores.UserStore.getCurrentUser(),i,m=()=>{i||(i=p().premiumType,p().premiumType=2)},h=()=>{i!==void 0&&(p().premiumType=i,i=void 0)};var{plugin:{store:g},flux:{stores:{SelectedGuildStore:F,EmojiStore:U}}}=shelter,W=()=>!!document.querySelector('[data-list-item-id="guildsnav___home"][class*="selected"]'),q=()=>Number.isSafeInteger(parseInt(g.size))?g.size:64,b=e=>{let t=[],r=[];for(let o of e){let s=[];for(let n of o.children){if(n.emoji){let u=U.getCustomEmojiById(n.emoji.emojiId);if(u.guildId!==F.getLastSelectedGuildId()||u.animated||W()){t.push(`${u.url.split("?")[0]}?size=${q()}`);continue}}s.push(n)}r.push({...o,children:s})}for(let o of t)r.push({type:"line",children:[{text:o}]});return r};var x=l(a()),S=l(a()),I=l(a()),v=l(a()),A=(0,x.template)('<input type="text" placeholder="64">',1),{plugin:{store:d},ui:{Header:B,HeaderTags:D}}=shelter,T=()=>[(0,v.createComponent)(B,{get tag(){return D.H3},children:"Emoji Size (defaults to 64 if invalid)"}),(()=>{let e=A.cloneNode(!0);return e.$$input=t=>d.size=parseInt(t.target.value),(0,I.effect)(()=>e.value=Number.isSafeInteger(d.size)?d.size:""),e})()];(0,S.delegateEvents)(["input"]);var{flux:{dispatcher:z},plugin:{store:y},observeDom:N,util:{getFiber:G}}=shelter;y.size===void 0&&(y.size=64);function $(e){let t=(r,o)=>{if(e.event===r){m();let s=N(o,n=>{n.isConnected||(setTimeout(()=>h(),5e3),s())})}};t("expression_picker_opened","#emoji-picker-tab-panel"),t("channel_autocomplete_open","[class*=autocomplete]")}var j=!1,O=e=>{if(e.dataset.YSINK_FM)return;e.dataset.YSINK_FM="1";let r=G(e).child.pendingProps.editor;e.onkeydown=o=>{j||o.key==="Enter"&&!document.querySelector("[class*=autocomplete],[class*=attachedBars]")&&(r.children=b(r.children))}},P=N('[class*="slateContainer-"]',e=>{O(e)});z.subscribe("TRACK",$);var R=()=>{z.unsubscribe("TRACK",$),P(),j=!0};return w(Y);})();
