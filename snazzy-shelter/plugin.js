(()=>{var qn=Object.create;var ae=Object.defineProperty;var Gn=Object.getOwnPropertyDescriptor;var Jn=Object.getOwnPropertyNames;var Yn=Object.getPrototypeOf,Qn=Object.prototype.hasOwnProperty;var wt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xn=(e,t)=>{for(var r in t)ae(e,r,{get:t[r],enumerable:!0})},xt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Jn(t))!Qn.call(e,o)&&o!==r&&ae(e,o,{get:()=>t[o],enumerable:!(n=Gn(t,o))||n.enumerable});return e};var l=(e,t,r)=>(r=e!=null?qn(Yn(e)):{},xt(t||!e||!e.__esModule?ae(r,"default",{value:e,enumerable:!0}):r,e)),Zn=e=>xt(ae({},"__esModule",{value:!0}),e);var u=wt((ya,Rt)=>{Rt.exports=shelter.solidWeb});var Fr=wt((Ga,Br)=>{Br.exports=shelter.solid});var Zi={};Xn(Zi,{onUnload:()=>Xi});var eo=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,to=/^\\@/;function ro(e){try{return JSON.parse(e)}catch{}}function no(e){let t=e.split(`
`)[0],r=t.substring(t.lastIndexOf("//META")+6,t.lastIndexOf("*//")),n=ro(r);if(!n)throw new Error("META could not be parsed.");if(!n.name)throw new Error("META missing name data.");return n}function oo(e){let t=e.split("/**",2)[1].split("*/",1)[0],r={},n="",o="";for(let s of t.split(eo))if(s.length!==0)if(s.charAt(0)==="@"&&s.charAt(1)!==" "){n!==""&&(r[n]=o);let i=s.indexOf(" ");n=s.substr(1,i-1),o=s.substr(i+1)}else o+=` ${s.replace("\\n",`
`).replace(to,"@")}`;return r[n]=o.trim(),r}var kt=e=>{let t=e.split(`
`)[0];if(t.includes("//META"))return no(e);if(t.includes("/**"))return oo(e);throw new Error("META was not found.")};var U={},z={};async function ce(e){return U[e]||(z[e]||(z[e]=[fetch(e).then(async t=>{U[e]=[t.status,t.status===200?await t.text():void 0]}),0]),z[e][1]++,await z[e][0],z[e][1]--,z[e][1]===0&&delete z[e]),U[e]}async function le(e){let[t,r]=await ce(e);return[t,r?JSON.parse(r):void 0]}var St=()=>Object.keys(U).forEach(e=>delete U[e]);async function so(e,t){let r=new URL(e,t).href,[n,o]=await ce(r);if(n!==200)throw new Error(`BD theme existed in cache with non-200 status ${n}`);return{url:r,CSS:()=>Promise.resolve(o),compat:!0,repoUrl:t,...kt(o)}}async function io(e,t){let r=new URL(e,t).href,n=new URL(e,t).pathname.split("/");n.splice(n.length-1,1,"cumcord_theme.json");let o=new URL(n.join("/"),new URL(e,t).origin).href,[s,i]=await le(o);if(s!==200)throw new Error(`CC manifest existed in cache with non-200 status ${s}`);return{url:r,compat:!1,...i,repoUrl:t,CSS:async()=>{let[a,c]=await ce(r);if(a!==200)throw new Error(`CC CSS existed in cache with non-200 status ${a}`);return c}}}var T=async(e,t)=>{try{return await io(e,t)}catch(r){try{return await so(e,t)}catch(n){console.error(r,n);let o=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw o.e1=r,o.e2=n,o}}};async function ao(e){let t=new URL("repo.json",e).href,[r,n]=await le(t);if(r!==200)throw new Error(`Repo manifest existed in cache with non-200 status ${r}`);if(!n.themes||n.themes?.length===0)throw new Error("No themes found in repo");if(!n.meta)throw new Error("No repo metadata");if(!n?.meta.name)throw new Error("Repo did not have a name");return n}var j=async e=>{let t=await ao(e),n=(await Promise.allSettled(t.themes.map(o=>T(o,e)))).filter(o=>o.status==="rejected"?(console.error("snazzy-shelter: loading theme failed: ",o.reason),!1):!0).map(o=>o.value);return{manifest:t,themes:n}};var{plugin:{store:Y}}=shelter,ze=Object.freeze(["https://cumcordthemes.github.io/Cumsock/"]),Ct=async()=>{Array.isArray(Y.repos)||(Y.repos=[]);for(let e of ze)if(!Y.repos.find(t=>t.url===e.url)){try{await j(e)}catch{continue}Y.repos=[...Y.repos,e]}};var{solid:{createEffect:co},plugin:{store:Mt},ui:{injectCss:lo}}=shelter,Tt=()=>{let e=lo(Mt.quickCSS||" "),t;return co(()=>{t||e(Mt.quickCSS||" ")}),()=>{e(),t=!0}};var{ui:{injectCss:uo},plugin:{store:x}}=shelter,Q=new Map;async function D(e){if(!e?.url||!await e.CSS())throw new Error("theme was missing either id or css.");let t=uo(await e.CSS());Q.set(e.url,t);let r=x.themes.findIndex(o=>o.url===e.url),n={...e};delete n.CSS,n.enabled=!0,r===-1?x.themes=[...x.themes,n]:x.themes[r]=n}function De(e){if(!e?.url)throw new Error("theme was missing id.");Q.get(e.url)?.(),Q.delete(e.url);let r=x.themes.findIndex(o=>o.url===e.url),n={...e};n.enabled=!1,r===-1?x.themes=[...x.themes,n]:x.themes[r]=n}function Et(e){try{De(e)}catch(t){if(t.message!=="theme was not loaded.")throw t}x.themes=x.themes.filter(t=>t.url!==e.url)}function Ot(){Q.forEach(e=>e?.()),Q.clear()}var{plugin:{store:It}}=shelter,At=()=>{let e=!1;return It.themes&&It.themes.filter(t=>t.enabled).forEach(t=>T(t.url,t.repoUrl).then(r=>e||D(r))),()=>{Ot(),e=!0}};var jt=()=>(window.snazzyShelter=Object.freeze({TODO:"WIP"}),()=>delete window.snazzyShelter);var Hn=l(u()),yt=l(u()),vt=l(u());var at=l(u()),zr=l(u()),it=l(u()),Ce=l(u()),q=l(u());var de=l(u()),nr=l(u()),or=l(u()),V=l(u()),k=l(u()),he=l(u());var Be=l(u()),Nt=l(u()),Pt=l(u()),Fe=l(u()),Lt=l(u()),mo=(0,Be.template)("<img>",1),fo=(0,Be.template)("<div></div>",2),zt=(e,t)=>()=>(()=>{let r=mo.cloneNode(!0);return(0,Lt.setAttribute)(r,"src",e),(0,Fe.className)(r,`ysink_stain_badge ysink_stain_${t}`),r})(),Dt=zt("https://betterdiscord.app/resources/branding/logo_small.svg","bd"),Bt=zt("https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg","cc"),Ft=e=>(()=>{let t=fo.cloneNode(!0);return t.style.setProperty("border-radius","9999px"),t.style.setProperty("color","white"),t.style.setProperty("font-size",".8rem"),t.style.setProperty("padding",".1rem .3rem"),t.style.setProperty("text-transform","uppercase"),t.style.setProperty("font-weight","bold"),(0,Pt.insert)(t,()=>e.text),(0,Nt.effect)(r=>{let n=e.class,o=e.color;return n!==r._v$&&(0,Fe.className)(t,r._v$=n),o!==r._v$2&&t.style.setProperty("background-color",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),t})();var Vt=l(u()),Kt=l(u()),X=l(u());var fe=l(u()),ue=l(u()),me=l(u()),Wt=l(u()),ho=(0,fe.template)("<div>WIP</div>",2),po=(0,fe.template)('<div class="ysink_stain_carousel"></div>',2),go=(0,fe.template)('<div class="ysink_stain_noimg"></div>',2),{Text:_o}=shelter.ui,Ht=e=>ho.cloneNode(!0),Ut=e=>(()=>{let t=po.cloneNode(!0);return(0,me.insert)(t,(()=>{let r=(0,Wt.memo)(()=>!!e.media);return()=>r()?(0,ue.createComponent)(Ht,{get items(){return(typeof e.media=="string"?[e.media]:e.media).map(n=>({type:1,src:n}))},autoplayInterval:5e3}):(()=>{let n=go.cloneNode(!0);return(0,me.insert)(n,(0,ue.createComponent)(_o,{class:"ysink_stain_noimgtxt",children:"No Image"}),null),(0,me.insert)(n,(0,ue.createComponent)(Ht,{items:[{type:1,src:""}]}),null),n})()})()),t})();var yo=(0,Vt.template)("<div></div>",2),{openModal:vo,ModalRoot:bo,ModalHeader:$o,ModalBody:wo,ModalSizes:xo}=shelter.ui,qt=e=>vo(({close:t})=>(0,X.createComponent)(bo,{get size(){return xo.MEDIUM},get children(){return[(0,X.createComponent)($o,{close:t}),(0,X.createComponent)(wo,{get children(){let r=yo.cloneNode(!0);return r.style.setProperty("margin-bottom","1rem"),(0,Kt.insert)(r,(0,X.createComponent)(Ut,{media:e})),r}})]}}));var Gt=l(u()),Jt=l(u()),Yt=l(u()),ko=(0,Gt.template)('<svg><path d="M 3.9999998,21.333333 C 3.9999998,22.8 5.1999998,24 6.6666665,24 H 17.333334 C 18.799999,24 20,22.8 20,21.333333 V 5.3333333 H 3.9999998 Z M 7.2799998,11.84 9.1599995,9.96 12,12.786667 14.826667,9.96 l 1.879999,1.88 -2.826667,2.826667 2.826667,2.826666 -1.879999,1.88 L 12,16.546667 l -2.8266665,2.826666 -1.8800003,-1.88 2.8266658,-2.826666 z M 16.666666,1.3333333 15.333334,0 H 8.6666665 L 7.3333332,1.3333333 H 2.6666665 V 4 H 21.333334 V 1.3333333 Z"></path></svg>',4),Qt=e=>(()=>{let t=ko.cloneNode(!0);return(0,Jt.spread)(t,(0,Yt.mergeProps)(e,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"}),!0,!0),t})();var Xt=l(u()),Zt=l(u()),er=l(u()),So=(0,Xt.template)('<svg><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>',4),tr=e=>(()=>{let t=So.cloneNode(!0);return(0,Zt.spread)(t,(0,er.mergeProps)(e,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"}),!0,!0),t})();var Co=(0,de.template)('<div class="ysink_stain_card ysink_stain_tcard"><div class="ysink_stain_tmedia"></div><div class="ysink_stain_title"></div><div class="ysink_stain_tdesc"></div><div class="ysink_stain_tacts"></div><div class="ysink_stain_taulic"></div></div>',12),Mo=(0,de.template)('<div class="ysink_stain_tview">VIEW MEDIA</div>',2),To=(0,de.template)("<div>NO MEDIA</div>",2),{ui:{Switch:Eo},plugin:{store:sr}}=shelter,Oo=e=>navigator.clipboard.writeText(e);function rr(e){for(let t of sr.themes)if(t.url===e&&t.enabled)return!0;return!1}var Io=e=>sr.themes.some(t=>t.url===e),pe=e=>(()=>{let t=Co.cloneNode(!0),r=t.firstChild,n=r.nextSibling,o=n.nextSibling,s=o.nextSibling,i=s.nextSibling;return r.$$click=()=>e.theme.media&&qt(e.theme.media),(0,k.insert)(r,(()=>{let a=(0,he.memo)(()=>!!e.theme.media);return()=>a()?Mo.cloneNode(!0):To.cloneNode(!0)})()),(0,k.insert)(n,(()=>{let a=(0,he.memo)(()=>!!e.theme.compat);return()=>a()?(0,V.createComponent)(Dt,{}):(0,V.createComponent)(Bt,{})})(),null),(0,k.insert)(n,()=>e.theme.name,null),(0,k.insert)(o,()=>e.theme.description),(0,k.insert)(s,(0,V.createComponent)(tr,{class:"ysink_stain_iconbtn",onClick:()=>Oo(e.theme.url)}),null),(0,k.insert)(s,(()=>{let a=(0,he.memo)(()=>!!Io(e.theme.url));return()=>a()?(0,V.createComponent)(Qt,{class:"ysink_stain_iconbtn",onClick:()=>{Et(e.theme)}}):[]})(),null),(0,k.insert)(s,(0,V.createComponent)(Eo,{get checked(){return rr(e.theme.url)},onChange:async()=>rr(e.theme.url)?De(e.theme):D(await T(e.theme.url))}),null),(0,k.insert)(i,()=>e.theme.author?`by ${e.theme.author} `:"",null),(0,k.insert)(i,()=>e.theme.license?`under ${e.theme.license}`:"",null),(0,or.effect)(a=>{let c=e.gap,m=e.theme.media&&`url(${Array.isArray(e.theme.media)?e.theme.media[0]:e.theme.media})`;return c!==a._v$&&t.style.setProperty("margin-bottom",a._v$=c),m!==a._v$2&&r.style.setProperty("background-image",a._v$2=m),a},{_v$:void 0,_v$2:void 0}),t})();(0,nr.delegateEvents)(["click"]);var ar=l(u()),cr=l(u()),lr=l(u()),ur=l(u()),mr=l(u());var Ao=(0,ar.template)('<div class="ysink_stain_row"><input class="ysink_stain_input" placeholder="Theme import URL" type="text"></div>',3),{ui:{Button:jo,ButtonSizes:Ro,showToast:ir},solid:{createSignal:No}}=shelter,fr=()=>{let[e,t]=No("");return(()=>{let r=Ao.cloneNode(!0),n=r.firstChild;return n.$$input=o=>t(o.target.value),(0,lr.insert)(r,(0,ur.createComponent)(jo,{class:"ysink_stain_button",get size(){return Ro.MEDIUM},onClick:()=>{T(e()).then(async o=>{await D(o),ir({title:`Loaded theme ${o.name}`,duration:5e3}),t("")},()=>ir({title:"Failed to fetch theme - check URL",duration:5e3}))},children:"Install"}),null),(0,mr.effect)(()=>n.value=e()),r})()};(0,cr.delegateEvents)(["input"]);function E(e){return Array.isArray?Array.isArray(e):br(e)==="[object Array]"}var Po=1/0;function Lo(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Po?"-0":t}function zo(e){return e==null?"":Lo(e)}function S(e){return typeof e=="string"}function yr(e){return typeof e=="number"}function Do(e){return e===!0||e===!1||Bo(e)&&br(e)=="[object Boolean]"}function vr(e){return typeof e=="object"}function Bo(e){return vr(e)&&e!==null}function v(e){return e!=null}function He(e){return!e.trim().length}function br(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Fo="Incorrect 'index' type",Ho=e=>`Invalid value for key ${e}`,Wo=e=>`Pattern length exceeds max of ${e}.`,Uo=e=>`Missing ${e} property in key`,Vo=e=>`Property 'weight' in key '${e}' must be a positive integer`,hr=Object.prototype.hasOwnProperty,We=class{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let o=$r(n);r+=o.weight,this._keys.push(o),this._keyMap[o.id]=o,r+=o.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function $r(e){let t=null,r=null,n=null,o=1,s=null;if(S(e)||E(e))n=e,t=dr(e),r=Ue(e);else{if(!hr.call(e,"name"))throw new Error(Uo("name"));let i=e.name;if(n=i,hr.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(Vo(i));t=dr(i),r=Ue(i),s=e.getFn}return{path:t,id:r,weight:o,src:n,getFn:s}}function dr(e){return E(e)?e:e.split(".")}function Ue(e){return E(e)?e.join("."):e}function Ko(e,t){let r=[],n=!1,o=(s,i,a)=>{if(!!v(s))if(!i[a])r.push(s);else{let c=i[a],m=s[c];if(!v(m))return;if(a===i.length-1&&(S(m)||yr(m)||Do(m)))r.push(zo(m));else if(E(m)){n=!0;for(let f=0,d=m.length;f<d;f+=1)o(m[f],i,a+1)}else i.length&&o(m,i,a+1)}};return o(e,S(t)?t.split("."):t,0),n?r:r[0]}var qo={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Go={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Jo={location:0,threshold:.6,distance:100},Yo={useExtendedSearch:!1,getFn:Ko,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},h={...Go,...qo,...Jo,...Yo},Qo=/[^ ]+/g;function Xo(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(o){let s=o.match(Qo).length;if(r.has(s))return r.get(s);let i=1/Math.pow(s,.5*e),a=parseFloat(Math.round(i*n)/n);return r.set(s,a),a},clear(){r.clear()}}}var Z=class{constructor({getFn:t=h.getFn,fieldNormWeight:r=h.fieldNormWeight}={}){this.norm=Xo(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,S(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();S(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!v(t)||He(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((o,s)=>{let i=o.getFn?o.getFn(t):this.getFn(t,o.path);if(!!v(i)){if(E(i)){let a=[],c=[{nestedArrIndex:-1,value:i}];for(;c.length;){let{nestedArrIndex:m,value:f}=c.pop();if(!!v(f))if(S(f)&&!He(f)){let d={v:f,i:m,n:this.norm.get(f)};a.push(d)}else E(f)&&f.forEach((d,p)=>{c.push({nestedArrIndex:p,value:d})})}n.$[s]=a}else if(S(i)&&!He(i)){let a={v:i,n:this.norm.get(i)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function wr(e,t,{getFn:r=h.getFn,fieldNormWeight:n=h.fieldNormWeight}={}){let o=new Z({getFn:r,fieldNormWeight:n});return o.setKeys(e.map($r)),o.setSources(t),o.create(),o}function Zo(e,{getFn:t=h.getFn,fieldNormWeight:r=h.fieldNormWeight}={}){let{keys:n,records:o}=e,s=new Z({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(o),s}function ge(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:o=h.distance,ignoreLocation:s=h.ignoreLocation}={}){let i=t/e.length;if(s)return i;let a=Math.abs(n-r);return o?i+a/o:a?1:i}function es(e=[],t=h.minMatchCharLength){let r=[],n=-1,o=-1,s=0;for(let i=e.length;s<i;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(o=s-1,o-n+1>=t&&r.push([n,o]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}var B=32;function ts(e,t,r,{location:n=h.location,distance:o=h.distance,threshold:s=h.threshold,findAllMatches:i=h.findAllMatches,minMatchCharLength:a=h.minMatchCharLength,includeMatches:c=h.includeMatches,ignoreLocation:m=h.ignoreLocation}={}){if(t.length>B)throw new Error(Wo(B));let f=t.length,d=e.length,p=Math.max(0,Math.min(n,d)),g=s,y=p,b=a>1||c,P=b?Array(d):[],M;for(;(M=e.indexOf(t,y))>-1;){let $=ge(t,{currentLocation:M,expectedLocation:p,distance:o,ignoreLocation:m});if(g=Math.min($,g),y=M+f,b){let I=0;for(;I<f;)P[M+I]=1,I+=1}}y=-1;let H=[],L=1,se=f+d,Kn=1<<f-1;for(let $=0;$<f;$+=1){let I=0,A=se;for(;I<A;)ge(t,{errors:$,currentLocation:p+A,expectedLocation:p,distance:o,ignoreLocation:m})<=g?I=A:se=A,A=Math.floor((se-I)/2+I);se=A;let bt=Math.max(1,p-A+1),Le=i?d:Math.min(p+A,d)+f,W=Array(Le+2);W[Le+1]=(1<<$)-1;for(let w=Le;w>=bt;w-=1){let ie=w-1,$t=r[e.charAt(ie)];if(b&&(P[ie]=+!!$t),W[w]=(W[w+1]<<1|1)&$t,$&&(W[w]|=(H[w+1]|H[w])<<1|1|H[w+1]),W[w]&Kn&&(L=ge(t,{errors:$,currentLocation:ie,expectedLocation:p,distance:o,ignoreLocation:m}),L<=g)){if(g=L,y=ie,y<=p)break;bt=Math.max(1,2*p-y)}}if(ge(t,{errors:$+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:m})>g)break;H=W}let Pe={isMatch:y>=0,score:Math.max(.001,L)};if(b){let $=es(P,a);$.length?c&&(Pe.indices=$):Pe.isMatch=!1}return Pe}function rs(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let o=e.charAt(r);t[o]=(t[o]||0)|1<<n-r-1}return t}var _e=class{constructor(t,{location:r=h.location,threshold:n=h.threshold,distance:o=h.distance,includeMatches:s=h.includeMatches,findAllMatches:i=h.findAllMatches,minMatchCharLength:a=h.minMatchCharLength,isCaseSensitive:c=h.isCaseSensitive,ignoreLocation:m=h.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:m},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let f=(p,g)=>{this.chunks.push({pattern:p,alphabet:rs(p),startIndex:g})},d=this.pattern.length;if(d>B){let p=0,g=d%B,y=d-g;for(;p<y;)f(this.pattern.substr(p,B),p),p+=B;if(g){let b=d-B;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return n&&(y.indices=[[0,t.length-1]]),y}let{location:o,distance:s,threshold:i,findAllMatches:a,minMatchCharLength:c,ignoreLocation:m}=this.options,f=[],d=0,p=!1;this.chunks.forEach(({pattern:y,alphabet:b,startIndex:P})=>{let{isMatch:M,score:H,indices:L}=ts(t,y,b,{location:o+P,distance:s,threshold:i,findAllMatches:a,minMatchCharLength:c,includeMatches:n,ignoreLocation:m});M&&(p=!0),d+=H,M&&L&&(f=[...f,...L])});let g={isMatch:p,score:p?d/this.chunks.length:1};return p&&n&&(g.indices=f),g}},C=class{constructor(t){this.pattern=t}static isMultiMatch(t){return pr(t,this.multiRegex)}static isSingleMatch(t){return pr(t,this.singleRegex)}search(){}};function pr(e,t){let r=e.match(t);return r?r[1]:null}var Ve=class extends C{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ke=class extends C{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},qe=class extends C{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ge=class extends C{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Je=class extends C{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},Ye=class extends C{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},ye=class extends C{constructor(t,{location:r=h.location,threshold:n=h.threshold,distance:o=h.distance,includeMatches:s=h.includeMatches,findAllMatches:i=h.findAllMatches,minMatchCharLength:a=h.minMatchCharLength,isCaseSensitive:c=h.isCaseSensitive,ignoreLocation:m=h.ignoreLocation}={}){super(t),this._bitapSearch=new _e(t,{location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:m})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},ve=class extends C{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,o=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,o.push([n,r-1]);let i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}},Qe=[Ve,ve,qe,Ge,Ye,Je,Ke,ye],gr=Qe.length,ns=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,os="|";function ss(e,t={}){return e.split(os).map(r=>{let n=r.trim().split(ns).filter(s=>s&&!!s.trim()),o=[];for(let s=0,i=n.length;s<i;s+=1){let a=n[s],c=!1,m=-1;for(;!c&&++m<gr;){let f=Qe[m],d=f.isMultiMatch(a);d&&(o.push(new f(d,t)),c=!0)}if(!c)for(m=-1;++m<gr;){let f=Qe[m],d=f.isSingleMatch(a);if(d){o.push(new f(d,t));break}}}return o})}var is=new Set([ye.type,ve.type]),Xe=class{constructor(t,{isCaseSensitive:r=h.isCaseSensitive,includeMatches:n=h.includeMatches,minMatchCharLength:o=h.minMatchCharLength,ignoreLocation:s=h.ignoreLocation,findAllMatches:i=h.findAllMatches,location:a=h.location,threshold:c=h.threshold,distance:m=h.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:o,findAllMatches:i,ignoreLocation:s,location:a,threshold:c,distance:m},this.pattern=r?t:t.toLowerCase(),this.query=ss(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let s=0,i=[],a=0;for(let c=0,m=r.length;c<m;c+=1){let f=r[c];i.length=0,s=0;for(let d=0,p=f.length;d<p;d+=1){let g=f[d],{isMatch:y,indices:b,score:P}=g.search(t);if(y){if(s+=1,a+=P,n){let M=g.constructor.type;is.has(M)?i=[...i,...b]:i.push(b)}}else{a=0,s=0,i.length=0;break}}if(s){let d={isMatch:!0,score:a/s};return n&&(d.indices=i),d}}return{isMatch:!1,score:1}}},Ze=[];function as(...e){Ze.push(...e)}function et(e,t){for(let r=0,n=Ze.length;r<n;r+=1){let o=Ze[r];if(o.condition(e,t))return new o(e,t)}return new _e(e,t)}var be={AND:"$and",OR:"$or"},tt={PATH:"$path",PATTERN:"$val"},rt=e=>!!(e[be.AND]||e[be.OR]),cs=e=>!!e[tt.PATH],ls=e=>!E(e)&&vr(e)&&!rt(e),_r=e=>({[be.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function xr(e,t,{auto:r=!0}={}){let n=o=>{let s=Object.keys(o),i=cs(o);if(!i&&s.length>1&&!rt(o))return n(_r(o));if(ls(o)){let c=i?o[tt.PATH]:s[0],m=i?o[tt.PATTERN]:o[c];if(!S(m))throw new Error(Ho(c));let f={keyId:Ue(c),pattern:m};return r&&(f.searcher=et(m,t)),f}let a={children:[],operator:s[0]};return s.forEach(c=>{let m=o[c];E(m)&&m.forEach(f=>{a.children.push(n(f))})}),a};return rt(e)||(e=_r(e)),n(e)}function us(e,{ignoreFieldNorm:t=h.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:o,norm:s,score:i})=>{let a=o?o.weight:null;n*=Math.pow(i===0&&a?Number.EPSILON:i,(a||1)*(t?1:s))}),r.score=n})}function ms(e,t){let r=e.matches;t.matches=[],v(r)&&r.forEach(n=>{if(!v(n.indices)||!n.indices.length)return;let{indices:o,value:s}=n,i={indices:o,value:s};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),t.matches.push(i)})}function fs(e,t){t.score=e.score}function hs(e,t,{includeMatches:r=h.includeMatches,includeScore:n=h.includeScore}={}){let o=[];return r&&o.push(ms),n&&o.push(fs),e.map(s=>{let{idx:i}=s,a={item:t[i],refIndex:i};return o.length&&o.forEach(c=>{c(s,a)}),a})}var O=class{constructor(t,r={},n){this.options={...h,...r},this.options.useExtendedSearch,this._keyStore=new We(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Z))throw new Error(Fo);this._myIndex=r||wr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!v(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,o=this._docs.length;n<o;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,o-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:o,shouldSort:s,sortFn:i,ignoreFieldNorm:a}=this.options,c=S(t)?S(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return us(c,{ignoreFieldNorm:a}),s&&c.sort(i),yr(r)&&r>-1&&(c=c.slice(0,r)),hs(c,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(t){let r=et(t,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:s,i,n:a})=>{if(!v(s))return;let{isMatch:c,score:m,indices:f}=r.searchIn(s);c&&o.push({item:s,idx:i,matches:[{score:m,value:s,norm:a,indices:f}]})}),o}_searchLogical(t){let r=xr(t,this.options),n=(a,c,m)=>{if(!a.children){let{keyId:d,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:p});return g&&g.length?[{idx:m,item:c,matches:g}]:[]}let f=[];for(let d=0,p=a.children.length;d<p;d+=1){let g=a.children[d],y=n(g,c,m);if(y.length)f.push(...y);else if(a.operator===be.AND)return[]}return f},o=this._myIndex.records,s={},i=[];return o.forEach(({$:a,i:c})=>{if(v(a)){let m=n(r,a,c);m.length&&(s[c]||(s[c]={idx:c,item:a,matches:[]},i.push(s[c])),m.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),i}_searchObjectList(t){let r=et(t,this.options),{keys:n,records:o}=this._myIndex,s=[];return o.forEach(({$:i,i:a})=>{if(!v(i))return;let c=[];n.forEach((m,f)=>{c.push(...this._findMatches({key:m,value:i[f],searcher:r}))}),c.length&&s.push({idx:a,item:i,matches:c})}),s}_findMatches({key:t,value:r,searcher:n}){if(!v(r))return[];let o=[];if(E(r))r.forEach(({v:s,i,n:a})=>{if(!v(s))return;let{isMatch:c,score:m,indices:f}=n.searchIn(s);c&&o.push({score:m,key:t,value:s,idx:i,norm:a,indices:f})});else{let{v:s,n:i}=r,{isMatch:a,score:c,indices:m}=n.searchIn(s);a&&o.push({score:c,key:t,value:s,norm:i,indices:m})}return o}};O.version="6.6.2";O.createIndex=wr;O.parseIndex=Zo;O.config=h;O.parseQuery=xr;as(Xe);var ds={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]},ps=(e,t)=>!t||t===""?e:new O(e,ds).search(t).map(r=>r.item),$e=(e,t,r)=>ps(_.uniqBy(e??[],n=>n.url),t).filter(n=>r==="0"||r==="1"&&!n.compat||r==="2"&&n.compat);var Sr=l(u()),Cr=l(u()),Mr=l(u()),Tr=l(u()),Er=l(u()),nt=l(u()),gs=(0,Sr.template)('<input type="text">',1),kr=e=>(()=>{let t=gs.cloneNode(!0);return t.$$input=r=>e.onQueryChange(r.target.value),(0,nt.effect)(r=>{let n=e.class,o=e.placeholder;return n!==r._v$&&(0,Er.className)(t,r._v$=n),o!==r._v$2&&(0,Tr.setAttribute)(t,"placeholder",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),(0,nt.effect)(()=>t.value=e.query),t})(),we=e=>(0,Mr.createComponent)(kr,{class:"ysink_stain_searchbar",get query(){return e.query},get onQueryChange(){return e.onChange},placeholder:"Search themes...",get size(){return kr.Sizes.MEDIUM}});(0,Cr.delegateEvents)(["input"]);var st=l(u()),Or=l(u()),Ir=l(u()),ot=l(u()),xe=l(u()),_s=(0,st.template)("<select></select>",2),ys=(0,st.template)("<option></option>",2),vs=e=>(()=>{let t=_s.cloneNode(!0);return t.addEventListener("change",r=>e.onChange(r.target.value)),(0,ot.insert)(t,()=>e.options.map(r=>(()=>{let n=ys.cloneNode(!0);return(0,ot.insert)(n,()=>r.label),(0,xe.effect)(()=>n.value=r.value),n})())),(0,xe.effect)(r=>{let n=e.isDisabled,o=e.class;return n!==r._v$&&(t.disabled=r._v$=n),o!==r._v$2&&(0,Ir.className)(t,r._v$2=o),r},{_v$:void 0,_v$2:void 0}),(0,xe.effect)(()=>t.value=e.value),t})(),ke=e=>(0,Or.createComponent)(vs,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],get value(){return e.filterMode},get onChange(){return e.setFilterMode},isDisabled:!1,class:"ysink_stain_dropdown"});var Ar=l(u()),Se=l(u()),K=l(u()),bs=(0,Ar.template)('<div class="ysink_stain_nosplash"></div>',2),{Header:$s,HeaderTags:ws,Text:xs,Button:ks,ButtonColors:Ss,ButtonSizes:Cs}=shelter.ui,jr=e=>(()=>{let t=bs.cloneNode(!0);return(0,Se.insert)(t,(0,K.createComponent)($s,{get tag(){return ws.H2},get children(){return e.title}}),null),(0,Se.insert)(t,(0,K.createComponent)(xs,{get children(){return e.subtitle}}),null),(0,Se.insert)(t,(0,K.createComponent)(ks,{class:"ysink_stain_button",get color(){return Ss.GREEN},get size(){return Cs.LARGE},get onClick(){return e.onClick},get children(){return e.btnText}}),null),t})(),Rr=e=>(0,K.createComponent)(jr,{title:"No Repos",subtitle:"Add one in the repo manager!",get onClick(){return e.goToRepos},btnText:"Open repo manager"}),Nr=e=>(0,K.createComponent)(jr,{title:"No Themes",subtitle:"Paste a link in above, or head over to the store",get onClick(){return e.goToStore},btnText:"Get some themes"});var Ms=(0,at.template)('<div class="ysink_stain_search_row"></div>',2),Ts=(0,at.template)('<div class="ysink_stain_cardcontainer"></div>',2),{solid:{createSignal:Pr},plugin:{store:Lr}}=shelter,Dr=e=>{let[t,r]=Pr(""),[n,o]=Pr("0");return[(0,q.createComponent)(fr,{}),(()=>{let s=Ms.cloneNode(!0);return(0,Ce.insert)(s,(0,q.createComponent)(we,{get query(){return t()},onChange:r}),null),(0,Ce.insert)(s,(0,q.createComponent)(ke,{get filterMode(){return n()},setFilterMode:o}),null),s})(),(0,it.memo)((()=>{let s=(0,it.memo)(()=>Lr.themes.length===0);return()=>s()?(0,q.createComponent)(Nr,{goToStore:()=>e.goTo(1)}):(()=>{let i=Ts.cloneNode(!0);return(0,Ce.insert)(i,()=>$e(Lr.themes,t(),n()).map(a=>(0,q.createComponent)(pe,(0,zr.mergeProps)(()=>({key:a.url,theme:a}))))),i})()})())]};var hn=l(u()),dn=l(u()),pn=l(u()),xc=l(u());var ln=l(u()),un=l(u()),mn=l(u()),F=l(Fr());function Es(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hr(Object(r),!0).forEach(function(n){Es(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Os(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Ur(e,t){if(e==null)return{};var r=Os(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Vr(e,t){return Is(e)||As(e,t)||js(e,t)||Rs()}function Is(e){if(Array.isArray(e))return e}function As(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),a;!(n=(a=i.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){o=!0,s=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(o)throw s}}return r}}function js(e,t){if(!!e){if(typeof e=="string")return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}}function Wr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kr(Object(r),!0).forEach(function(n){Ns(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ps(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,s){return s(o)},n)}}function ee(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.apply(r,[].concat(o,a))}}}function Te(e){return{}.toString.call(e).includes("Object")}function Ls(e){return!Object.keys(e).length}function te(e){return typeof e=="function"}function zs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ds(e,t){return Te(t)||R("changeType"),Object.keys(t).some(function(r){return!zs(e,r)})&&R("changeField"),t}function Bs(e){te(e)||R("selectorType")}function Fs(e){te(e)||Te(e)||R("handlerType"),Te(e)&&Object.values(e).some(function(t){return!te(t)})&&R("handlersType")}function Hs(e){e||R("initialIsRequired"),Te(e)||R("initialType"),Ls(e)&&R("initialContent")}function Ws(e,t){throw new Error(e[t]||e.default)}var Us={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},R=ee(Ws)(Us),Me={changes:Ds,selector:Bs,handler:Fs,initial:Hs};function Vs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Me.initial(e),Me.handler(t);var r={current:e},n=ee(Gs)(r,t),o=ee(qs)(r),s=ee(Me.changes)(e),i=ee(Ks)(r);function a(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Me.selector(m),m(r.current)}function c(m){Ps(n,o,s,i)(m)}return[a,c]}function Ks(e,t){return te(t)?t(e.current):t}function qs(e,t){return e.current=qr(qr({},e.current),t),t}function Gs(e,t,r){return te(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Js={create:Vs},Gr=Js;var Ys={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}},Jr=Ys;function Qs(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.apply(r,[].concat(o,a))}}}var Yr=Qs;function Xs(e){return{}.toString.call(e).includes("Object")}var Qr=Xs;function Zs(e){return e||Xr("configIsRequired"),Qr(e)||Xr("configType"),e.urls?(ei(),{paths:{vs:e.urls.monacoBase}}):e}function ei(){console.warn(Zr.deprecation)}function ti(e,t){throw new Error(e[t]||e.default)}var Zr={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Xr=Yr(ti)(Zr),ri={config:Zs},en=ri;var ni=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(s,i){return i(s)},o)}},tn=ni;function rn(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],rn(e[r],t[r]))}),ct(ct({},e),t)}var nn=rn;var oi={type:"cancelation",msg:"operation is manually canceled"};function si(e){var t=!1,r=new Promise(function(n,o){e.then(function(s){return t?o(oi):n(s)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Ee=si;var ii=Gr.create({config:Jr,isInitialized:!1,resolve:null,reject:null,monaco:null}),on=Vr(ii,2),re=on[0],Oe=on[1];function ai(e){var t=en.config(e),r=t.monaco,n=Ur(t,["monaco"]);Oe(function(o){return{config:nn(o.config,n),monaco:r}})}function ci(){var e=re(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(Oe({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Ee(lt);if(window.monaco&&window.monaco.editor)return sn(window.monaco),e.resolve(window.monaco),Ee(lt);tn(li,mi)(fi)}return Ee(lt)}function li(e){return document.body.appendChild(e)}function ui(e){var t=document.createElement("script");return e&&(t.src=e),t}function mi(e){var t=re(function(n){var o=n.config,s=n.reject;return{config:o,reject:s}}),r=ui("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function fi(){var e=re(function(r){var n=r.config,o=r.resolve,s=r.reject;return{config:n,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){sn(r),e.resolve(r)},function(r){e.reject(r)})}function sn(e){re().monaco||Oe({monaco:e})}function hi(){return re(function(e){var t=e.monaco;return t})}var lt=new Promise(function(e,t){return Oe({resolve:e,reject:t})}),di={config:ai,init:ci,__getMonacoInstance:hi},Ie=di;var G,ut,an=new Set;async function mt(e){if(!e||!e.trim()||an.has(e))return;an.add(e);let t=`https://cdn.esm.sh/monaco-themes@0.4.2/themes/${e}.json`,r=await fetch(t).then(n=>n.json());G.editor.defineTheme(e,r)}async function cn(e){G||(e&&Ie.config({monaco:e}),ut||(ut=Ie.init().then(t=>{G=t})),await ut)}var pi=(0,ln.template)("<div></div>",2),fn=e=>{let t,r=!1,n=async o=>{if(await cn(e.noCDN),await mt(e.theme),r)return;let s=G.editor.create(o,{language:e.lang,value:e.value,readOnly:e.readonly??!1,theme:e.theme,...e.otherCfg});t=()=>s.dispose(),s.onDidChangeModelContent(()=>{e.valOut?.(s.getValue())}),(0,F.createEffect)(()=>s.updateOptions({readOnly:e.readonly})),(0,F.createEffect)(()=>{e.value!==s.getValue()&&s.setValue(e.value)}),(0,F.createEffect)(async()=>{await mt(e.theme),s.updateOptions({theme:e.theme})}),(0,F.createEffect)(()=>{let i=s.getModel();!i||(G.editor.setModelLanguage(i,e.lang),s.setModel(i))})};return(0,F.onCleanup)(()=>{r=!0,t?.()}),(()=>{let o=pi.cloneNode(!0);return(0,mn.use)(n,o),(0,un.effect)(s=>{let i=e.width??"30rem",a=e.height??"10rem";return i!==s._v$&&o.style.setProperty("width",s._v$=i),a!==s._v$2&&o.style.setProperty("height",s._v$2=a),s},{_v$:void 0,_v$2:void 0}),o})()};var gi=(0,hn.template)("<div></div>",2),_i=_.debounce(e=>gn.quickCSS=e,250),{solid:{createSignal:yi},plugin:{store:gn}}=shelter,_n=()=>{let[e,t]=yi(gn.quickCSS);return(()=>{let r=gi.cloneNode(!0);return r.style.setProperty("maxWidth","60vw"),r.style.setProperty("height","40rem"),r.style.setProperty("resize","vertical"),r.style.setProperty("overflow","hidden"),r.style.setProperty("paddingBottom",".5rem"),(0,dn.insert)(r,(0,pn.createComponent)(fn,{get value(){return e()??" "},valOut:n=>{t(n),_i(n)},lang:"css",theme:"Dracula",width:"100%",height:"100%",otherCfg:{automaticLayout:!0}})),r})()};var kn=l(u()),Sn=l(u()),je=l(u()),Re=l(u()),Cn=l(u());var vn=l(u()),Ae=l(u()),ne=l(u()),bn=l(u());var vi=(0,vn.template)('<div class="ysink_stain_card ysink_stain_row"><div><div class="ysink_stain_title"></div></div></div>',6),{solid:{createResource:bi},ui:{Text:$i,Button:wi,ButtonColors:xi},plugin:{store:yn}}=shelter,$n=e=>{let[t]=bi(()=>e.repo,j);return(()=>{let r=vi.cloneNode(!0),n=r.firstChild,o=n.firstChild;return(0,ne.insert)(o,()=>t()?.manifest.meta.name,null),(0,ne.insert)(o,(()=>{let s=(0,bn.memo)(()=>!!ze.includes(e.repo));return()=>s()&&(0,Ae.createComponent)(Ft,{class:"ysink_stain_officialbadge",text:"official",color:"var(--info-positive-foreground)"})})(),null),(0,ne.insert)(n,(0,Ae.createComponent)($i,{get children(){return e.repo}}),null),(0,ne.insert)(r,(0,Ae.createComponent)(wi,{get color(){return xi.RED},class:"ysink_stain_button",grow:!0,onClick:()=>yn.repos=yn.repos.filter(s=>s!==e.repo),children:"Remove Repo"}),null),r})()};var{plugin:{store:ft}}=shelter;async function ki(e){try{return await j(e),!0}catch{return!1}}async function wn(e,t,r){return e.endsWith("/")||(e+="/"),ft.repos.includes(e)?(r("You already have this repo!"),!1):await ki(e)?(ft.repos=[...ft.repos,e],t("Added repo"),!0):(r("Repo was invalid"),!1)}var Si=(0,kn.template)('<div><div class="ysink_stain_row"><input placeholder="https://example.com/repo" type="text"></div><div class="ysink_stain_cardcontainer"></div></div>',7),{showToast:Ci}=shelter.ui,xn=e=>Ci({title:e,duration:5e3}),{solid:{createSignal:Mi},plugin:{store:Ti},ui:{Button:Ei,Divider:Oi,ButtonSizes:Ii}}=shelter,Mn=()=>{let[e,t]=Mi("");return(()=>{let r=Si.cloneNode(!0),n=r.firstChild,o=n.firstChild,s=n.nextSibling;return n.style.setProperty("display","flex"),o.$$input=i=>t(i.target.value),(0,je.insert)(n,(0,Re.createComponent)(Ei,{class:"ysink_stain_button",get size(){return Ii.MEDIUM},onClick:async()=>{await wn(e(),xn,xn)&&t("")},children:"Add"}),null),(0,je.insert)(r,(0,Re.createComponent)(Oi,{mt:".5rem",mb:".5rem"}),s),(0,je.insert)(s,()=>Ti.repos.map(i=>(0,Re.createComponent)($n,{repo:i}))),(0,Cn.effect)(()=>o.value=e()),r})()};(0,Sn.delegateEvents)(["input"]);var Nn=l(u()),ht=l(u()),dt=l(u()),J=l(u());var Tn=l(u()),En=l(u()),On=l(u()),In=l(u()),An=l(u()),Ai=(0,Tn.template)("<div><div></div></div>",4),{For:ji}=window.shelter.solid,jn=e=>(()=>{let t=Ai.cloneNode(!0),r=t.firstChild;return t.style.setProperty("overflow-y","auto"),r.style.setProperty("width","100%"),r.style.setProperty("position","relative"),(0,In.insert)(r,(0,An.createComponent)(ji,{get each(){return e.items},children:n=>e.children(n)})),(0,On.effect)(n=>{let o=e.height,s=e.class;return o!==n._v$&&t.style.setProperty("height",n._v$=o),s!==n._v$2&&(0,En.className)(t,n._v$2=s),n},{_v$:void 0,_v$2:void 0}),t})();var Ri=(0,Nn.template)('<div class="ysink_stain_search_row"></div>',2),{solid:{createSignal:Rn,createResource:Ni},plugin:{store:pt},ui:{niceScrollbarsClass:Pi}}=shelter,Li=()=>Promise.all(pt.repos.map(j)),zi=()=>Li().then(e=>e.flatMap(t=>t.themes)),Pn=e=>{let[t,r]=Rn(""),[n,o]=Rn("0"),[s]=Ni(()=>pt.repos,zi);return[(()=>{let i=Ri.cloneNode(!0);return(0,dt.insert)(i,(0,J.createComponent)(we,{get query(){return t()},onChange:r}),null),(0,dt.insert)(i,(0,J.createComponent)(ke,{get filterMode(){return n()},setFilterMode:o}),null),i})(),(0,ht.memo)((()=>{let i=(0,ht.memo)(()=>pt.repos.length===0);return()=>i()?(0,J.createComponent)(Rr,{goToRepos:()=>e.goTo(2)}):(0,J.createComponent)(jn,{get class(){return Pi()},height:"50rem",keySel:a=>a.url,get items(){return $e(s(),t(),n())},children:a=>(0,J.createComponent)(pe,{theme:a,gap:".5rem"})})})())]};var gt=l(u());var{Button:Di,Text:Bi}=shelter.ui,Ln=()=>[(0,gt.createComponent)(Di,{class:"ysink_stain_button",grow:!0,onClick:St,children:"Clear fetch cache"}),(0,gt.createComponent)(Bi,{children:"@ me if you need other things for debug purposes :)"})];var _t=l(u()),zn=l(u()),Dn=l(u()),Bn=l(u()),Ne=l(u()),oe=l(u()),Fi=(0,_t.template)('<div class="ysink_stain_tabbar_root"><div class="ysink_stain_tabbar"></div><div class="ysink_stain_tabbar_content"></div></div>',6),Hi=(0,_t.template)("<button></button>",2),{solid:{createSignal:Wi},solidWeb:{Dynamic:Ui},ui:{Text:Vi,Divider:Ki}}=shelter,Fn=e=>{let[t,r]=Wi(0);return(()=>{let n=Fi.cloneNode(!0),o=n.firstChild,s=o.nextSibling;return(0,oe.insert)(o,()=>e.items.map((i,a)=>(()=>{let c=Hi.cloneNode(!0);return c.$$click=()=>r(a),(0,oe.insert)(c,(0,Ne.createComponent)(Vi,{get children(){return i.text}})),(0,Bn.effect)(()=>(0,Dn.className)(c,"ysink_stain_button"+(a===t()?" ysink_stain_selected":""))),c})())),(0,oe.insert)(n,(0,Ne.createComponent)(Ki,{mt:".5rem",mb:".5rem"}),s),(0,oe.insert)(s,(0,Ne.createComponent)(Ui,{get component(){return e.items[t()].component},goTo:r})),n})()};(0,zn.delegateEvents)(["click"]);var qi=(0,Hn.template)("<div></div>",2),{Header:Gi,HeaderTags:Ji}=shelter.ui,Wn=()=>(()=>{let e=qi.cloneNode(!0);return(0,yt.insert)(e,(0,vt.createComponent)(Gi,{get tag(){return Ji.H1},children:"Snazzy Shelter Settings"}),null),(0,yt.insert)(e,(0,vt.createComponent)(Fn,{items:[{text:"Installed",component:Dr},{text:"Store",component:Pn},{text:"Repos",component:Mn},{text:"Quick CSS",component:_n},{text:"Debug",component:Ln}]}),null),e})();var Un=()=>shelter.settings.registerSection("section","shsnazzy","Themes",Wn);var Vn=`
.ysink_stain_card{background:var(--background-secondary-alt);padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;width:100% !important;color:var(--text-normal)}.ysink_stain_title{display:flex;align-items:center;font-size:1rem;color:var(--interactive-active)}.ysink_stain_cardcontainer>*{margin-bottom:.5rem}.ysink_stain_row{display:flex;gap:1rem}.ysink_stain_row>:not(:last-child){flex:1}.ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(255,255,255,.2666666667)}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(0,0,0,.2)}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;background:var(--input-background);color:#fff;border:none}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_tcard{display:grid;grid-template-columns:auto 1fr min-content;grid-template-rows:auto 1fr;align-items:center}.ysink_stain_tcard .ysink_stain_tmedia{grid-row:1/3;height:4rem;width:7rem;margin-right:1rem;background-size:cover}.ysink_stain_tcard .ysink_stain_tmedia *{display:flex;justify-content:center;align-items:center;height:100%}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview{z-index:1;transition:opacity 250ms ease;backdrop-filter:brightness(0.3);cursor:pointer}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview:not(:hover){opacity:0}.ysink_stain_tcard .ysink_stain_tdesc{grid-area:2/2}.ysink_stain_tcard .ysink_stain_tacts{grid-column:3;justify-self:right}.ysink_stain_tcard .ysink_stain_tacts>:last-child{margin-left:.25rem}.ysink_stain_tcard .ysink_stain_tacts>*{display:inline-block}.ysink_stain_tcard .ysink_stain_taulic{text-align:right;min-width:8rem}.ysink_stain_iconbtn{margin-right:.25rem;fill:var(--interactive-normal);cursor:pointer;height:22px;width:22px}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#7289da}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}.ysink_stain_officialbadge{display:inline;margin-left:.5rem}.ysink_stain_button{color:#fff !important}.ysink_stain_input,.ysink_stain_searchbar{background:var(--input-background);color:#fff;border:none}#shsnazzy-tab{padding-bottom:0}`;var{plugin:{store:N},ui:{injectCss:Yi}}=shelter;Array.isArray(N.repos)||Ct();Array.isArray(N.themes)||(N.themes=[]);N.css&&(N.quickCSS||(N.quickCSS=N.css),delete N.css);var Qi=[Tt(),At(),jt(),Un(),Yi(Vn)],Xi=()=>_.forEachRight(Qi,e=>e());return Zn(Zi);})();
