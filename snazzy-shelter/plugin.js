(()=>{var Ln=Object.create;var le=Object.defineProperty;var zn=Object.getOwnPropertyDescriptor;var Dn=Object.getOwnPropertyNames;var Bn=Object.getPrototypeOf,Fn=Object.prototype.hasOwnProperty;var xt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Hn=(e,t)=>{for(var r in t)le(e,r,{get:t[r],enumerable:!0})},kt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Dn(t))!Fn.call(e,o)&&o!==r&&le(e,o,{get:()=>t[o],enumerable:!(n=zn(t,o))||n.enumerable});return e};var l=(e,t,r)=>(r=e!=null?Ln(Bn(e)):{},kt(t||!e||!e.__esModule?le(r,"default",{value:e,enumerable:!0}):r,e)),Wn=e=>kt(le({},"__esModule",{value:!0}),e);var u=xt((la,Nt)=>{Nt.exports=shelter.solidWeb});var jr=xt((Da,Ar)=>{Ar.exports=shelter.solid});var Ui={};Hn(Ui,{onUnload:()=>Wi});var Un=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,Vn=/^\\@/;function Kn(e){try{return JSON.parse(e)}catch{}}function qn(e){let t=e.split(`
`)[0],r=t.substring(t.lastIndexOf("//META")+6,t.lastIndexOf("*//")),n=Kn(r);if(!n)throw new Error("META could not be parsed.");if(!n.name)throw new Error("META missing name data.");return n}function Gn(e){let t=e.split("/**",2)[1].split("*/",1)[0],r={},n="",o="";for(let s of t.split(Un))if(s.length!==0)if(s.charAt(0)==="@"&&s.charAt(1)!==" "){n!==""&&(r[n]=o);let i=s.indexOf(" ");n=s.substr(1,i-1),o=s.substr(i+1)}else o+=` ${s.replace("\\n",`
`).replace(Vn,"@")}`;return r[n]=o.trim(),r}var St=e=>{let t=e.split(`
`)[0];if(t.includes("//META"))return qn(e);if(t.includes("/**"))return Gn(e);throw new Error("META was not found.")};var U={},z={};async function ue(e){return U[e]||(z[e]||(z[e]=[fetch(e).then(async t=>{U[e]=[t.status,t.status===200?await t.text():void 0]}),0]),z[e][1]++,await z[e][0],z[e][1]--,z[e][1]===0&&delete z[e]),U[e]}async function me(e){let[t,r]=await ue(e);return[t,r?JSON.parse(r):void 0]}var Ct=()=>Object.keys(U).forEach(e=>delete U[e]);async function Jn(e,t){let r=new URL(e,t).href,[n,o]=await ue(r);if(n!==200)throw new Error(`BD theme existed in cache with non-200 status ${n}`);return{url:r,CSS:()=>Promise.resolve(o),compat:!0,repoUrl:t,...St(o)}}async function Yn(e,t){let r=new URL(e,t).href,n=new URL(e,t).pathname.split("/");n.splice(n.length-1,1,"cumcord_theme.json");let o=new URL(n.join("/"),new URL(e,t).origin).href,[s,i]=await me(o);if(s!==200)throw new Error(`CC manifest existed in cache with non-200 status ${s}`);return{url:r,compat:!1,...i,repoUrl:t,CSS:async()=>{let[a,c]=await ue(r);if(a!==200)throw new Error(`CC CSS existed in cache with non-200 status ${a}`);return c}}}var T=async(e,t)=>{try{return await Yn(e,t)}catch(r){try{return await Jn(e,t)}catch(n){console.error(r,n);let o=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw o.e1=r,o.e2=n,o}}};async function Qn(e){let t=new URL("repo.json",e).href,[r,n]=await me(t);if(r!==200)throw new Error(`Repo manifest existed in cache with non-200 status ${r}`);if(!n.themes||n.themes?.length===0)throw new Error("No themes found in repo");if(!n.meta)throw new Error("No repo metadata");if(!n?.meta.name)throw new Error("Repo did not have a name");return n}var j=async e=>{let t=await Qn(e),n=(await Promise.allSettled(t.themes.map(o=>T(o,e)))).filter(o=>o.status==="rejected"?(console.error("snazzy-shelter: loading theme failed: ",o.reason),!1):!0).map(o=>o.value);return{manifest:t,themes:n}};var{plugin:{store:Y}}=shelter,ze=Object.freeze(["https://cumcordthemes.github.io/Cumsock/"]),Mt=async()=>{Array.isArray(Y.repos)||(Y.repos=[]);for(let e of ze)if(!Y.repos.find(t=>t.url===e.url)){try{await j(e)}catch{continue}Y.repos=[...Y.repos,e]}};var{solid:{createEffect:Xn},plugin:{store:Tt},ui:{injectCss:Zn}}=shelter,Ot=()=>{let e=Zn(Tt.quickCSS||" "),t;return Xn(()=>{t||e(Tt.quickCSS||" ")}),()=>{e(),t=!0}};var{ui:{injectCss:eo},plugin:{store:x}}=shelter,Q=new Map;async function D(e){if(!e?.url||!await e.CSS())throw new Error("theme was missing either id or css.");let t=eo(await e.CSS());Q.set(e.url,t);let r=x.themes.findIndex(o=>o.url===e.url),n={...e};delete n.CSS,n.enabled=!0,r===-1?x.themes=[...x.themes,n]:x.themes[r]=n}function De(e){if(!e?.url)throw new Error("theme was missing id.");Q.get(e.url)?.(),Q.delete(e.url);let r=x.themes.findIndex(o=>o.url===e.url),n={...e};n.enabled=!1,r===-1?x.themes=[...x.themes,n]:x.themes[r]=n}function Et(e){try{De(e)}catch(t){if(t.message!=="theme was not loaded.")throw t}x.themes=x.themes.filter(t=>t.url!==e.url)}function It(){Q.forEach(e=>e?.()),Q.clear()}var{plugin:{store:At}}=shelter,jt=()=>{let e=!1;return At.themes&&At.themes.filter(t=>t.enabled).forEach(t=>T(t.url,t.repoUrl).then(r=>e||D(r))),()=>{It(),e=!0}};var Rt=()=>(window.snazzyShelter=Object.freeze({TODO:"WIP"}),()=>delete window.snazzyShelter);var An=l(u()),vt=l(u()),bt=l(u());var ct=l(u()),Er=l(u()),at=l(u()),Te=l(u()),q=l(u());var ge=l(u()),or=l(u()),sr=l(u()),V=l(u()),k=l(u()),pe=l(u());var Be=l(u()),Pt=l(u()),Lt=l(u()),Fe=l(u()),zt=l(u()),to=(0,Be.template)("<img>",1),ro=(0,Be.template)("<div></div>",2),Dt=(e,t)=>()=>(()=>{let r=to.cloneNode(!0);return(0,zt.setAttribute)(r,"src",e),(0,Fe.className)(r,`ysink_stain_badge ysink_stain_${t}`),r})(),Bt=Dt("https://betterdiscord.app/resources/branding/logo_small.svg","bd"),Ft=Dt("https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg","cc"),Ht=e=>(()=>{let t=ro.cloneNode(!0);return t.style.setProperty("border-radius","9999px"),t.style.setProperty("color","white"),t.style.setProperty("font-size",".8rem"),t.style.setProperty("padding",".1rem .3rem"),t.style.setProperty("text-transform","uppercase"),t.style.setProperty("font-weight","bold"),(0,Lt.insert)(t,()=>e.text),(0,Pt.effect)(r=>{let n=e.class,o=e.color;return n!==r._v$&&(0,Fe.className)(t,r._v$=n),o!==r._v$2&&t.style.setProperty("background-color",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),t})();var Kt=l(u()),qt=l(u()),X=l(u());var fe=l(u()),he=l(u()),de=l(u()),Ut=l(u()),no=(0,fe.template)("<div>WIP</div>",2),oo=(0,fe.template)('<div class="ysink_stain_carousel"></div>',2),so=(0,fe.template)('<div class="ysink_stain_noimg"></div>',2),{Text:io}=shelter.ui,Wt=e=>no.cloneNode(!0),Vt=e=>(()=>{let t=oo.cloneNode(!0);return(0,de.insert)(t,(()=>{let r=(0,Ut.memo)(()=>!!e.media);return()=>r()?(0,he.createComponent)(Wt,{get items(){return(typeof e.media=="string"?[e.media]:e.media).map(n=>({type:1,src:n}))},autoplayInterval:5e3}):(()=>{let n=so.cloneNode(!0);return(0,de.insert)(n,(0,he.createComponent)(io,{class:"ysink_stain_noimgtxt",children:"No Image"}),null),(0,de.insert)(n,(0,he.createComponent)(Wt,{items:[{type:1,src:""}]}),null),n})()})()),t})();var ao=(0,Kt.template)("<div></div>",2),{openModal:co,ModalRoot:lo,ModalHeader:uo,ModalBody:mo,ModalSizes:ho}=shelter.ui,Gt=e=>co(({close:t})=>(0,X.createComponent)(lo,{get size(){return ho.MEDIUM},get children(){return[(0,X.createComponent)(uo,{close:t}),(0,X.createComponent)(mo,{get children(){let r=ao.cloneNode(!0);return r.style.setProperty("margin-bottom","1rem"),(0,qt.insert)(r,(0,X.createComponent)(Vt,{media:e})),r}})]}}));var Jt=l(u()),Yt=l(u()),Qt=l(u()),fo=(0,Jt.template)('<svg><path d="M 3.9999998,21.333333 C 3.9999998,22.8 5.1999998,24 6.6666665,24 H 17.333334 C 18.799999,24 20,22.8 20,21.333333 V 5.3333333 H 3.9999998 Z M 7.2799998,11.84 9.1599995,9.96 12,12.786667 14.826667,9.96 l 1.879999,1.88 -2.826667,2.826667 2.826667,2.826666 -1.879999,1.88 L 12,16.546667 l -2.8266665,2.826666 -1.8800003,-1.88 2.8266658,-2.826666 z M 16.666666,1.3333333 15.333334,0 H 8.6666665 L 7.3333332,1.3333333 H 2.6666665 V 4 H 21.333334 V 1.3333333 Z"></path></svg>',4),Xt=e=>(()=>{let t=fo.cloneNode(!0);return(0,Yt.spread)(t,(0,Qt.mergeProps)(e,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"}),!0,!0),t})();var Zt=l(u()),er=l(u()),tr=l(u()),po=(0,Zt.template)('<svg><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>',4),rr=e=>(()=>{let t=po.cloneNode(!0);return(0,er.spread)(t,(0,tr.mergeProps)(e,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"}),!0,!0),t})();var go=(0,ge.template)('<div class="ysink_stain_card ysink_stain_tcard"><div class="ysink_stain_tmedia"></div><div class="ysink_stain_title"></div><div class="ysink_stain_tdesc"></div><div class="ysink_stain_tacts"></div><div class="ysink_stain_taulic"></div></div>',12),_o=(0,ge.template)('<div class="ysink_stain_tview">VIEW MEDIA</div>',2),yo=(0,ge.template)("<div>NO MEDIA</div>",2),{ui:{Switch:vo},plugin:{store:ir}}=shelter,bo=e=>navigator.clipboard.writeText(e);function nr(e){for(let t of ir.themes)if(t.url===e&&t.enabled)return!0;return!1}var wo=e=>ir.themes.some(t=>t.url===e),_e=e=>(()=>{let t=go.cloneNode(!0),r=t.firstChild,n=r.nextSibling,o=n.nextSibling,s=o.nextSibling,i=s.nextSibling;return r.$$click=()=>e.theme.media&&Gt(e.theme.media),(0,k.insert)(r,(()=>{let a=(0,pe.memo)(()=>!!e.theme.media);return()=>a()?_o.cloneNode(!0):yo.cloneNode(!0)})()),(0,k.insert)(n,(()=>{let a=(0,pe.memo)(()=>!!e.theme.compat);return()=>a()?(0,V.createComponent)(Bt,{}):(0,V.createComponent)(Ft,{})})(),null),(0,k.insert)(n,()=>e.theme.name,null),(0,k.insert)(o,()=>e.theme.description),(0,k.insert)(s,(0,V.createComponent)(rr,{class:"ysink_stain_iconbtn",onClick:()=>bo(e.theme.url)}),null),(0,k.insert)(s,(()=>{let a=(0,pe.memo)(()=>!!wo(e.theme.url));return()=>a()?(0,V.createComponent)(Xt,{class:"ysink_stain_iconbtn",onClick:()=>{Et(e.theme)}}):[]})(),null),(0,k.insert)(s,(0,V.createComponent)(vo,{get checked(){return nr(e.theme.url)},onChange:async()=>nr(e.theme.url)?De(e.theme):D(await T(e.theme.url))}),null),(0,k.insert)(i,()=>e.theme.author?`by ${e.theme.author} `:"",null),(0,k.insert)(i,()=>e.theme.license?`under ${e.theme.license}`:"",null),(0,sr.effect)(a=>{let c=e.gap,m=e.theme.media&&`url(${Array.isArray(e.theme.media)?e.theme.media[0]:e.theme.media})`;return c!==a._v$&&t.style.setProperty("margin-bottom",a._v$=c),m!==a._v$2&&r.style.setProperty("background-image",a._v$2=m),a},{_v$:void 0,_v$2:void 0}),t})();(0,or.delegateEvents)(["click"]);var cr=l(u()),He=l(u()),We=l(u());var $o=(0,cr.template)('<div class="ysink_stain_row"></div>',2),{ui:{Button:xo,ButtonSizes:ko,showToast:ar,TextBox:So},solid:{createSignal:Co}}=shelter,lr=()=>{let[e,t]=Co("");return(()=>{let r=$o.cloneNode(!0);return(0,He.insert)(r,(0,We.createComponent)(So,{get value(){return e()},onInput:t,placeholder:"Theme import URL"}),null),(0,He.insert)(r,(0,We.createComponent)(xo,{class:"ysink_stain_button",get size(){return ko.MEDIUM},onClick:()=>{T(e()).then(async n=>{await D(n),ar({title:`Loaded theme ${n.name}`,duration:5e3}),t("")},()=>ar({title:"Failed to fetch theme - check URL",duration:5e3}))},children:"Install"}),null),r})()};function O(e){return Array.isArray?Array.isArray(e):_r(e)==="[object Array]"}var Mo=1/0;function To(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Mo?"-0":t}function Oo(e){return e==null?"":To(e)}function S(e){return typeof e=="string"}function pr(e){return typeof e=="number"}function Eo(e){return e===!0||e===!1||Io(e)&&_r(e)=="[object Boolean]"}function gr(e){return typeof e=="object"}function Io(e){return gr(e)&&e!==null}function v(e){return e!=null}function Ue(e){return!e.trim().length}function _r(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Ao="Incorrect 'index' type",jo=e=>`Invalid value for key ${e}`,Ro=e=>`Pattern length exceeds max of ${e}.`,No=e=>`Missing ${e} property in key`,Po=e=>`Property 'weight' in key '${e}' must be a positive integer`,ur=Object.prototype.hasOwnProperty,Ve=class{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let o=yr(n);r+=o.weight,this._keys.push(o),this._keyMap[o.id]=o,r+=o.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function yr(e){let t=null,r=null,n=null,o=1,s=null;if(S(e)||O(e))n=e,t=mr(e),r=Ke(e);else{if(!ur.call(e,"name"))throw new Error(No("name"));let i=e.name;if(n=i,ur.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(Po(i));t=mr(i),r=Ke(i),s=e.getFn}return{path:t,id:r,weight:o,src:n,getFn:s}}function mr(e){return O(e)?e:e.split(".")}function Ke(e){return O(e)?e.join("."):e}function Lo(e,t){let r=[],n=!1,o=(s,i,a)=>{if(!!v(s))if(!i[a])r.push(s);else{let c=i[a],m=s[c];if(!v(m))return;if(a===i.length-1&&(S(m)||pr(m)||Eo(m)))r.push(Oo(m));else if(O(m)){n=!0;for(let h=0,f=m.length;h<f;h+=1)o(m[h],i,a+1)}else i.length&&o(m,i,a+1)}};return o(e,S(t)?t.split("."):t,0),n?r:r[0]}var zo={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Do={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Bo={location:0,threshold:.6,distance:100},Fo={useExtendedSearch:!1,getFn:Lo,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},d={...Do,...zo,...Bo,...Fo},Ho=/[^ ]+/g;function Wo(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(o){let s=o.match(Ho).length;if(r.has(s))return r.get(s);let i=1/Math.pow(s,.5*e),a=parseFloat(Math.round(i*n)/n);return r.set(s,a),a},clear(){r.clear()}}}var Z=class{constructor({getFn:t=d.getFn,fieldNormWeight:r=d.fieldNormWeight}={}){this.norm=Wo(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,S(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();S(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!v(t)||Ue(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((o,s)=>{let i=o.getFn?o.getFn(t):this.getFn(t,o.path);if(!!v(i)){if(O(i)){let a=[],c=[{nestedArrIndex:-1,value:i}];for(;c.length;){let{nestedArrIndex:m,value:h}=c.pop();if(!!v(h))if(S(h)&&!Ue(h)){let f={v:h,i:m,n:this.norm.get(h)};a.push(f)}else O(h)&&h.forEach((f,p)=>{c.push({nestedArrIndex:p,value:f})})}n.$[s]=a}else if(S(i)&&!Ue(i)){let a={v:i,n:this.norm.get(i)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function vr(e,t,{getFn:r=d.getFn,fieldNormWeight:n=d.fieldNormWeight}={}){let o=new Z({getFn:r,fieldNormWeight:n});return o.setKeys(e.map(yr)),o.setSources(t),o.create(),o}function Uo(e,{getFn:t=d.getFn,fieldNormWeight:r=d.fieldNormWeight}={}){let{keys:n,records:o}=e,s=new Z({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(o),s}function ye(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:o=d.distance,ignoreLocation:s=d.ignoreLocation}={}){let i=t/e.length;if(s)return i;let a=Math.abs(n-r);return o?i+a/o:a?1:i}function Vo(e=[],t=d.minMatchCharLength){let r=[],n=-1,o=-1,s=0;for(let i=e.length;s<i;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(o=s-1,o-n+1>=t&&r.push([n,o]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}var B=32;function Ko(e,t,r,{location:n=d.location,distance:o=d.distance,threshold:s=d.threshold,findAllMatches:i=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,includeMatches:c=d.includeMatches,ignoreLocation:m=d.ignoreLocation}={}){if(t.length>B)throw new Error(Ro(B));let h=t.length,f=e.length,p=Math.max(0,Math.min(n,f)),g=s,y=p,b=a>1||c,P=b?Array(f):[],M;for(;(M=e.indexOf(t,y))>-1;){let w=ye(t,{currentLocation:M,expectedLocation:p,distance:o,ignoreLocation:m});if(g=Math.min(w,g),y=M+h,b){let I=0;for(;I<h;)P[M+I]=1,I+=1}}y=-1;let H=[],L=1,ae=h+f,Pn=1<<h-1;for(let w=0;w<h;w+=1){let I=0,A=ae;for(;I<A;)ye(t,{errors:w,currentLocation:p+A,expectedLocation:p,distance:o,ignoreLocation:m})<=g?I=A:ae=A,A=Math.floor((ae-I)/2+I);ae=A;let wt=Math.max(1,p-A+1),Le=i?f:Math.min(p+A,f)+h,W=Array(Le+2);W[Le+1]=(1<<w)-1;for(let $=Le;$>=wt;$-=1){let ce=$-1,$t=r[e.charAt(ce)];if(b&&(P[ce]=+!!$t),W[$]=(W[$+1]<<1|1)&$t,w&&(W[$]|=(H[$+1]|H[$])<<1|1|H[$+1]),W[$]&Pn&&(L=ye(t,{errors:w,currentLocation:ce,expectedLocation:p,distance:o,ignoreLocation:m}),L<=g)){if(g=L,y=ce,y<=p)break;wt=Math.max(1,2*p-y)}}if(ye(t,{errors:w+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:m})>g)break;H=W}let Pe={isMatch:y>=0,score:Math.max(.001,L)};if(b){let w=Vo(P,a);w.length?c&&(Pe.indices=w):Pe.isMatch=!1}return Pe}function qo(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let o=e.charAt(r);t[o]=(t[o]||0)|1<<n-r-1}return t}var ve=class{constructor(t,{location:r=d.location,threshold:n=d.threshold,distance:o=d.distance,includeMatches:s=d.includeMatches,findAllMatches:i=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:c=d.isCaseSensitive,ignoreLocation:m=d.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:m},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let h=(p,g)=>{this.chunks.push({pattern:p,alphabet:qo(p),startIndex:g})},f=this.pattern.length;if(f>B){let p=0,g=f%B,y=f-g;for(;p<y;)h(this.pattern.substr(p,B),p),p+=B;if(g){let b=f-B;h(this.pattern.substr(b),b)}}else h(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return n&&(y.indices=[[0,t.length-1]]),y}let{location:o,distance:s,threshold:i,findAllMatches:a,minMatchCharLength:c,ignoreLocation:m}=this.options,h=[],f=0,p=!1;this.chunks.forEach(({pattern:y,alphabet:b,startIndex:P})=>{let{isMatch:M,score:H,indices:L}=Ko(t,y,b,{location:o+P,distance:s,threshold:i,findAllMatches:a,minMatchCharLength:c,includeMatches:n,ignoreLocation:m});M&&(p=!0),f+=H,M&&L&&(h=[...h,...L])});let g={isMatch:p,score:p?f/this.chunks.length:1};return p&&n&&(g.indices=h),g}},C=class{constructor(t){this.pattern=t}static isMultiMatch(t){return hr(t,this.multiRegex)}static isSingleMatch(t){return hr(t,this.singleRegex)}search(){}};function hr(e,t){let r=e.match(t);return r?r[1]:null}var qe=class extends C{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ge=class extends C{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},Je=class extends C{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ye=class extends C{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Qe=class extends C{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},Xe=class extends C{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},be=class extends C{constructor(t,{location:r=d.location,threshold:n=d.threshold,distance:o=d.distance,includeMatches:s=d.includeMatches,findAllMatches:i=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:c=d.isCaseSensitive,ignoreLocation:m=d.ignoreLocation}={}){super(t),this._bitapSearch=new ve(t,{location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:m})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},we=class extends C{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,o=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,o.push([n,r-1]);let i=!!o.length;return{isMatch:i,score:i?0:1,indices:o}}},Ze=[qe,we,Je,Ye,Xe,Qe,Ge,be],dr=Ze.length,Go=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Jo="|";function Yo(e,t={}){return e.split(Jo).map(r=>{let n=r.trim().split(Go).filter(s=>s&&!!s.trim()),o=[];for(let s=0,i=n.length;s<i;s+=1){let a=n[s],c=!1,m=-1;for(;!c&&++m<dr;){let h=Ze[m],f=h.isMultiMatch(a);f&&(o.push(new h(f,t)),c=!0)}if(!c)for(m=-1;++m<dr;){let h=Ze[m],f=h.isSingleMatch(a);if(f){o.push(new h(f,t));break}}}return o})}var Qo=new Set([be.type,we.type]),et=class{constructor(t,{isCaseSensitive:r=d.isCaseSensitive,includeMatches:n=d.includeMatches,minMatchCharLength:o=d.minMatchCharLength,ignoreLocation:s=d.ignoreLocation,findAllMatches:i=d.findAllMatches,location:a=d.location,threshold:c=d.threshold,distance:m=d.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:o,findAllMatches:i,ignoreLocation:s,location:a,threshold:c,distance:m},this.pattern=r?t:t.toLowerCase(),this.query=Yo(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let s=0,i=[],a=0;for(let c=0,m=r.length;c<m;c+=1){let h=r[c];i.length=0,s=0;for(let f=0,p=h.length;f<p;f+=1){let g=h[f],{isMatch:y,indices:b,score:P}=g.search(t);if(y){if(s+=1,a+=P,n){let M=g.constructor.type;Qo.has(M)?i=[...i,...b]:i.push(b)}}else{a=0,s=0,i.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return n&&(f.indices=i),f}}return{isMatch:!1,score:1}}},tt=[];function Xo(...e){tt.push(...e)}function rt(e,t){for(let r=0,n=tt.length;r<n;r+=1){let o=tt[r];if(o.condition(e,t))return new o(e,t)}return new ve(e,t)}var $e={AND:"$and",OR:"$or"},nt={PATH:"$path",PATTERN:"$val"},ot=e=>!!(e[$e.AND]||e[$e.OR]),Zo=e=>!!e[nt.PATH],es=e=>!O(e)&&gr(e)&&!ot(e),fr=e=>({[$e.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function br(e,t,{auto:r=!0}={}){let n=o=>{let s=Object.keys(o),i=Zo(o);if(!i&&s.length>1&&!ot(o))return n(fr(o));if(es(o)){let c=i?o[nt.PATH]:s[0],m=i?o[nt.PATTERN]:o[c];if(!S(m))throw new Error(jo(c));let h={keyId:Ke(c),pattern:m};return r&&(h.searcher=rt(m,t)),h}let a={children:[],operator:s[0]};return s.forEach(c=>{let m=o[c];O(m)&&m.forEach(h=>{a.children.push(n(h))})}),a};return ot(e)||(e=fr(e)),n(e)}function ts(e,{ignoreFieldNorm:t=d.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:o,norm:s,score:i})=>{let a=o?o.weight:null;n*=Math.pow(i===0&&a?Number.EPSILON:i,(a||1)*(t?1:s))}),r.score=n})}function rs(e,t){let r=e.matches;t.matches=[],v(r)&&r.forEach(n=>{if(!v(n.indices)||!n.indices.length)return;let{indices:o,value:s}=n,i={indices:o,value:s};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),t.matches.push(i)})}function ns(e,t){t.score=e.score}function os(e,t,{includeMatches:r=d.includeMatches,includeScore:n=d.includeScore}={}){let o=[];return r&&o.push(rs),n&&o.push(ns),e.map(s=>{let{idx:i}=s,a={item:t[i],refIndex:i};return o.length&&o.forEach(c=>{c(s,a)}),a})}var E=class{constructor(t,r={},n){this.options={...d,...r},this.options.useExtendedSearch,this._keyStore=new Ve(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Z))throw new Error(Ao);this._myIndex=r||vr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!v(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,o=this._docs.length;n<o;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,o-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:o,shouldSort:s,sortFn:i,ignoreFieldNorm:a}=this.options,c=S(t)?S(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return ts(c,{ignoreFieldNorm:a}),s&&c.sort(i),pr(r)&&r>-1&&(c=c.slice(0,r)),os(c,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(t){let r=rt(t,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:s,i,n:a})=>{if(!v(s))return;let{isMatch:c,score:m,indices:h}=r.searchIn(s);c&&o.push({item:s,idx:i,matches:[{score:m,value:s,norm:a,indices:h}]})}),o}_searchLogical(t){let r=br(t,this.options),n=(a,c,m)=>{if(!a.children){let{keyId:f,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:p});return g&&g.length?[{idx:m,item:c,matches:g}]:[]}let h=[];for(let f=0,p=a.children.length;f<p;f+=1){let g=a.children[f],y=n(g,c,m);if(y.length)h.push(...y);else if(a.operator===$e.AND)return[]}return h},o=this._myIndex.records,s={},i=[];return o.forEach(({$:a,i:c})=>{if(v(a)){let m=n(r,a,c);m.length&&(s[c]||(s[c]={idx:c,item:a,matches:[]},i.push(s[c])),m.forEach(({matches:h})=>{s[c].matches.push(...h)}))}}),i}_searchObjectList(t){let r=rt(t,this.options),{keys:n,records:o}=this._myIndex,s=[];return o.forEach(({$:i,i:a})=>{if(!v(i))return;let c=[];n.forEach((m,h)=>{c.push(...this._findMatches({key:m,value:i[h],searcher:r}))}),c.length&&s.push({idx:a,item:i,matches:c})}),s}_findMatches({key:t,value:r,searcher:n}){if(!v(r))return[];let o=[];if(O(r))r.forEach(({v:s,i,n:a})=>{if(!v(s))return;let{isMatch:c,score:m,indices:h}=n.searchIn(s);c&&o.push({score:m,key:t,value:s,idx:i,norm:a,indices:h})});else{let{v:s,n:i}=r,{isMatch:a,score:c,indices:m}=n.searchIn(s);a&&o.push({score:c,key:t,value:s,norm:i,indices:m})}return o}};E.version="6.6.2";E.createIndex=vr;E.parseIndex=Uo;E.config=d;E.parseQuery=br;Xo(et);var ss={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]},is=(e,t)=>!t||t===""?e:new E(e,ss).search(t).map(r=>r.item),xe=(e,t,r)=>is(_.uniqBy(e??[],n=>n.url),t).filter(n=>r==="0"||r==="1"&&!n.compat||r==="2"&&n.compat);var wr=l(u()),ke=e=>(0,wr.createComponent)(shelter.ui.TextBox,{get value(){return e.query},get onInput(){return e.onChange},placeholder:"Search themes..."});var it=l(u()),$r=l(u()),xr=l(u()),st=l(u()),Se=l(u()),as=(0,it.template)("<select></select>",2),cs=(0,it.template)("<option></option>",2),ls=e=>(()=>{let t=as.cloneNode(!0);return t.addEventListener("change",r=>e.onChange(r.target.value)),(0,st.insert)(t,()=>e.options.map(r=>(()=>{let n=cs.cloneNode(!0);return(0,st.insert)(n,()=>r.label),(0,Se.effect)(()=>n.value=r.value),n})())),(0,Se.effect)(r=>{let n=e.isDisabled,o=e.class;return n!==r._v$&&(t.disabled=r._v$=n),o!==r._v$2&&(0,xr.className)(t,r._v$2=o),r},{_v$:void 0,_v$2:void 0}),(0,Se.effect)(()=>t.value=e.value),t})(),Ce=e=>(0,$r.createComponent)(ls,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],get value(){return e.filterMode},get onChange(){return e.setFilterMode},isDisabled:!1,class:"ysink_stain_dropdown"});var kr=l(u()),Me=l(u()),K=l(u()),us=(0,kr.template)('<div class="ysink_stain_nosplash"></div>',2),{Header:ms,HeaderTags:hs,Text:ds,Button:fs,ButtonColors:ps,ButtonSizes:gs}=shelter.ui,Sr=e=>(()=>{let t=us.cloneNode(!0);return(0,Me.insert)(t,(0,K.createComponent)(ms,{get tag(){return hs.H2},get children(){return e.title}}),null),(0,Me.insert)(t,(0,K.createComponent)(ds,{get children(){return e.subtitle}}),null),(0,Me.insert)(t,(0,K.createComponent)(fs,{class:"ysink_stain_button",get color(){return ps.GREEN},get size(){return gs.LARGE},get onClick(){return e.onClick},get children(){return e.btnText}}),null),t})(),Cr=e=>(0,K.createComponent)(Sr,{title:"No Repos",subtitle:"Add one in the repo manager!",get onClick(){return e.goToRepos},btnText:"Open repo manager"}),Mr=e=>(0,K.createComponent)(Sr,{title:"No Themes",subtitle:"Paste a link in above, or head over to the store",get onClick(){return e.goToStore},btnText:"Get some themes"});var _s=(0,ct.template)('<div class="ysink_stain_search_row"></div>',2),ys=(0,ct.template)('<div class="ysink_stain_cardcontainer"></div>',2),{solid:{createSignal:Tr},plugin:{store:Or}}=shelter,Ir=e=>{let[t,r]=Tr(""),[n,o]=Tr("0");return[(0,q.createComponent)(lr,{}),(()=>{let s=_s.cloneNode(!0);return(0,Te.insert)(s,(0,q.createComponent)(ke,{get query(){return t()},onChange:r}),null),(0,Te.insert)(s,(0,q.createComponent)(Ce,{get filterMode(){return n()},setFilterMode:o}),null),s})(),(0,at.memo)((()=>{let s=(0,at.memo)(()=>Or.themes.length===0);return()=>s()?(0,q.createComponent)(Mr,{goToStore:()=>e.goTo(1)}):(()=>{let i=ys.cloneNode(!0);return(0,Te.insert)(i,()=>xe(Or.themes,t(),n()).map(a=>(0,q.createComponent)(_e,(0,Er.mergeProps)(()=>({key:a.url,theme:a}))))),i})()})())]};var on=l(u()),sn=l(u()),an=l(u()),fc=l(u());var en=l(u()),tn=l(u()),rn=l(u()),F=l(jr());function vs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rr(Object(r),!0).forEach(function(n){vs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bs(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function Pr(e,t){if(e==null)return{};var r=bs(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Lr(e,t){return ws(e)||$s(e,t)||xs(e,t)||ks()}function ws(e){if(Array.isArray(e))return e}function $s(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),a;!(n=(a=i.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){o=!0,s=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(o)throw s}}return r}}function xs(e,t){if(!!e){if(typeof e=="string")return Nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(e,t)}}function Nr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ks(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zr(Object(r),!0).forEach(function(n){Ss(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,s){return s(o)},n)}}function ee(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.apply(r,[].concat(o,a))}}}function Ee(e){return{}.toString.call(e).includes("Object")}function Ms(e){return!Object.keys(e).length}function te(e){return typeof e=="function"}function Ts(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Os(e,t){return Ee(t)||R("changeType"),Object.keys(t).some(function(r){return!Ts(e,r)})&&R("changeField"),t}function Es(e){te(e)||R("selectorType")}function Is(e){te(e)||Ee(e)||R("handlerType"),Ee(e)&&Object.values(e).some(function(t){return!te(t)})&&R("handlersType")}function As(e){e||R("initialIsRequired"),Ee(e)||R("initialType"),Ms(e)&&R("initialContent")}function js(e,t){throw new Error(e[t]||e.default)}var Rs={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},R=ee(js)(Rs),Oe={changes:Os,selector:Es,handler:Is,initial:As};function Ns(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Oe.initial(e),Oe.handler(t);var r={current:e},n=ee(zs)(r,t),o=ee(Ls)(r),s=ee(Oe.changes)(e),i=ee(Ps)(r);function a(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Oe.selector(m),m(r.current)}function c(m){Cs(n,o,s,i)(m)}return[a,c]}function Ps(e,t){return te(t)?t(e.current):t}function Ls(e,t){return e.current=Dr(Dr({},e.current),t),t}function zs(e,t,r){return te(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Ds={create:Ns},Br=Ds;var Bs={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}},Fr=Bs;function Fs(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t.apply(r,[].concat(o,a))}}}var Hr=Fs;function Hs(e){return{}.toString.call(e).includes("Object")}var Wr=Hs;function Ws(e){return e||Ur("configIsRequired"),Wr(e)||Ur("configType"),e.urls?(Us(),{paths:{vs:e.urls.monacoBase}}):e}function Us(){console.warn(Vr.deprecation)}function Vs(e,t){throw new Error(e[t]||e.default)}var Vr={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ur=Hr(Vs)(Vr),Ks={config:Ws},Kr=Ks;var qs=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(s,i){return i(s)},o)}},qr=qs;function Gr(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],Gr(e[r],t[r]))}),lt(lt({},e),t)}var Jr=Gr;var Gs={type:"cancelation",msg:"operation is manually canceled"};function Js(e){var t=!1,r=new Promise(function(n,o){e.then(function(s){return t?o(Gs):n(s)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Ie=Js;var Ys=Br.create({config:Fr,isInitialized:!1,resolve:null,reject:null,monaco:null}),Yr=Lr(Ys,2),re=Yr[0],Ae=Yr[1];function Qs(e){var t=Kr.config(e),r=t.monaco,n=Pr(t,["monaco"]);Ae(function(o){return{config:Jr(o.config,n),monaco:r}})}function Xs(){var e=re(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(Ae({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Ie(ut);if(window.monaco&&window.monaco.editor)return Qr(window.monaco),e.resolve(window.monaco),Ie(ut);qr(Zs,ti)(ri)}return Ie(ut)}function Zs(e){return document.body.appendChild(e)}function ei(e){var t=document.createElement("script");return e&&(t.src=e),t}function ti(e){var t=re(function(n){var o=n.config,s=n.reject;return{config:o,reject:s}}),r=ei("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function ri(){var e=re(function(r){var n=r.config,o=r.resolve,s=r.reject;return{config:n,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){Qr(r),e.resolve(r)},function(r){e.reject(r)})}function Qr(e){re().monaco||Ae({monaco:e})}function ni(){return re(function(e){var t=e.monaco;return t})}var ut=new Promise(function(e,t){return Ae({resolve:e,reject:t})}),oi={config:Qs,init:Xs,__getMonacoInstance:ni},je=oi;var G,mt,Xr=new Set;async function ht(e){if(!e||!e.trim()||Xr.has(e))return;Xr.add(e);let t=`https://cdn.esm.sh/monaco-themes@0.4.2/themes/${e}.json`,r=await fetch(t).then(n=>n.json());G.editor.defineTheme(e,r)}async function Zr(e){G||(e&&je.config({monaco:e}),mt||(mt=je.init().then(t=>{G=t})),await mt)}var si=(0,en.template)("<div></div>",2),nn=e=>{let t,r=!1,n=async o=>{if(await Zr(e.noCDN),await ht(e.theme),r)return;let s=G.editor.create(o,{language:e.lang,value:e.value,readOnly:e.readonly??!1,theme:e.theme,...e.otherCfg});t=()=>s.dispose(),s.onDidChangeModelContent(()=>{e.valOut?.(s.getValue())}),(0,F.createEffect)(()=>s.updateOptions({readOnly:e.readonly})),(0,F.createEffect)(()=>{e.value!==s.getValue()&&s.setValue(e.value)}),(0,F.createEffect)(async()=>{await ht(e.theme),s.updateOptions({theme:e.theme})}),(0,F.createEffect)(()=>{let i=s.getModel();!i||(G.editor.setModelLanguage(i,e.lang),s.setModel(i))})};return(0,F.onCleanup)(()=>{r=!0,t?.()}),(()=>{let o=si.cloneNode(!0);return(0,rn.use)(n,o),(0,tn.effect)(s=>{let i=e.width??"30rem",a=e.height??"10rem";return i!==s._v$&&o.style.setProperty("width",s._v$=i),a!==s._v$2&&o.style.setProperty("height",s._v$2=a),s},{_v$:void 0,_v$2:void 0}),o})()};var ii=(0,on.template)("<div></div>",2),ai=_.debounce(e=>cn.quickCSS=e,250),{solid:{createSignal:ci},plugin:{store:cn}}=shelter,ln=()=>{let[e,t]=ci(cn.quickCSS);return(()=>{let r=ii.cloneNode(!0);return r.style.setProperty("maxWidth","60vw"),r.style.setProperty("height","40rem"),r.style.setProperty("resize","vertical"),r.style.setProperty("overflow","hidden"),r.style.setProperty("paddingBottom",".5rem"),(0,sn.insert)(r,(0,an.createComponent)(nn,{get value(){return e()??" "},valOut:n=>{t(n),ai(n)},lang:"css",theme:"Dracula",width:"100%",height:"100%",otherCfg:{automaticLayout:!0}})),r})()};var gn=l(u()),oe=l(u()),se=l(u());var mn=l(u()),Re=l(u()),ne=l(u()),hn=l(u());var li=(0,mn.template)('<div class="ysink_stain_card ysink_stain_row"><div><div class="ysink_stain_title"></div></div></div>',6),{solid:{createResource:ui},ui:{Text:mi,Button:hi,ButtonColors:di},plugin:{store:un}}=shelter,dn=e=>{let[t]=ui(()=>e.repo,j);return(()=>{let r=li.cloneNode(!0),n=r.firstChild,o=n.firstChild;return(0,ne.insert)(o,()=>t()?.manifest.meta.name,null),(0,ne.insert)(o,(()=>{let s=(0,hn.memo)(()=>!!ze.includes(e.repo));return()=>s()&&(0,Re.createComponent)(Ht,{class:"ysink_stain_officialbadge",text:"official",color:"var(--info-positive-foreground)"})})(),null),(0,ne.insert)(n,(0,Re.createComponent)(mi,{get children(){return e.repo}}),null),(0,ne.insert)(r,(0,Re.createComponent)(hi,{get color(){return di.RED},class:"ysink_stain_button",grow:!0,onClick:()=>un.repos=un.repos.filter(s=>s!==e.repo),children:"Remove Repo"}),null),r})()};var{plugin:{store:dt}}=shelter;async function fi(e){try{return await j(e),!0}catch{return!1}}async function fn(e,t,r){return e.endsWith("/")||(e+="/"),dt.repos.includes(e)?(r("You already have this repo!"),!1):await fi(e)?(dt.repos=[...dt.repos,e],t("Added repo"),!0):(r("Repo was invalid"),!1)}var pi=(0,gn.template)('<div><div class="ysink_stain_row"></div><div class="ysink_stain_cardcontainer"></div></div>',6),{showToast:gi,TextBox:_i}=shelter.ui,pn=e=>gi({title:e,duration:5e3}),{solid:{createSignal:yi},plugin:{store:vi},ui:{Button:bi,Divider:wi,ButtonSizes:$i}}=shelter,_n=()=>{let[e,t]=yi("");return(()=>{let r=pi.cloneNode(!0),n=r.firstChild,o=n.nextSibling;return n.style.setProperty("display","flex"),(0,oe.insert)(n,(0,se.createComponent)(_i,{get value(){return e()},onInput:t,placeholder:"https://example.com/repo"}),null),(0,oe.insert)(n,(0,se.createComponent)(bi,{class:"ysink_stain_button",get size(){return $i.MEDIUM},onClick:async()=>{await fn(e(),pn,pn)&&t("")},children:"Add"}),null),(0,oe.insert)(r,(0,se.createComponent)(wi,{mt:".5rem",mb:".5rem"}),o),(0,oe.insert)(o,()=>vi.repos.map(s=>(0,se.createComponent)(dn,{repo:s}))),r})()};var Sn=l(u()),ft=l(u()),pt=l(u()),J=l(u());var yn=l(u()),vn=l(u()),bn=l(u()),wn=l(u()),$n=l(u()),xi=(0,yn.template)("<div><div></div></div>",4),{For:ki}=window.shelter.solid,xn=e=>(()=>{let t=xi.cloneNode(!0),r=t.firstChild;return t.style.setProperty("overflow-y","auto"),r.style.setProperty("width","100%"),r.style.setProperty("position","relative"),(0,wn.insert)(r,(0,$n.createComponent)(ki,{get each(){return e.items},children:n=>e.children(n)})),(0,bn.effect)(n=>{let o=e.height,s=e.class;return o!==n._v$&&t.style.setProperty("height",n._v$=o),s!==n._v$2&&(0,vn.className)(t,n._v$2=s),n},{_v$:void 0,_v$2:void 0}),t})();var Si=(0,Sn.template)('<div class="ysink_stain_search_row"></div>',2),{solid:{createSignal:kn,createResource:Ci},plugin:{store:gt},ui:{niceScrollbarsClass:Mi}}=shelter,Ti=()=>Promise.all(gt.repos.map(j)),Oi=()=>Ti().then(e=>e.flatMap(t=>t.themes)),Cn=e=>{let[t,r]=kn(""),[n,o]=kn("0"),[s]=Ci(()=>gt.repos,Oi);return[(()=>{let i=Si.cloneNode(!0);return(0,pt.insert)(i,(0,J.createComponent)(ke,{get query(){return t()},onChange:r}),null),(0,pt.insert)(i,(0,J.createComponent)(Ce,{get filterMode(){return n()},setFilterMode:o}),null),i})(),(0,ft.memo)((()=>{let i=(0,ft.memo)(()=>gt.repos.length===0);return()=>i()?(0,J.createComponent)(Cr,{goToRepos:()=>e.goTo(2)}):(0,J.createComponent)(xn,{get class(){return Mi()},height:"50rem",keySel:a=>a.url,get items(){return xe(s(),t(),n())},children:a=>(0,J.createComponent)(_e,{theme:a,gap:".5rem"})})})())]};var _t=l(u());var{Button:Ei,Text:Ii}=shelter.ui,Mn=()=>[(0,_t.createComponent)(Ei,{class:"ysink_stain_button",grow:!0,onClick:Ct,children:"Clear fetch cache"}),(0,_t.createComponent)(Ii,{children:"@ me if you need other things for debug purposes :)"})];var yt=l(u()),Tn=l(u()),On=l(u()),En=l(u()),Ne=l(u()),ie=l(u()),Ai=(0,yt.template)('<div class="ysink_stain_tabbar_root"><div class="ysink_stain_tabbar"></div><div class="ysink_stain_tabbar_content"></div></div>',6),ji=(0,yt.template)("<button></button>",2),{solid:{createSignal:Ri},solidWeb:{Dynamic:Ni},ui:{Text:Pi,Divider:Li}}=shelter,In=e=>{let[t,r]=Ri(0);return(()=>{let n=Ai.cloneNode(!0),o=n.firstChild,s=o.nextSibling;return(0,ie.insert)(o,()=>e.items.map((i,a)=>(()=>{let c=ji.cloneNode(!0);return c.$$click=()=>r(a),(0,ie.insert)(c,(0,Ne.createComponent)(Pi,{get children(){return i.text}})),(0,En.effect)(()=>(0,On.className)(c,"ysink_stain_button"+(a===t()?" ysink_stain_selected":""))),c})())),(0,ie.insert)(n,(0,Ne.createComponent)(Li,{mt:".5rem",mb:".5rem"}),s),(0,ie.insert)(s,(0,Ne.createComponent)(Ni,{get component(){return e.items[t()].component},goTo:r})),n})()};(0,Tn.delegateEvents)(["click"]);var zi=(0,An.template)("<div></div>",2),{Header:Di,HeaderTags:Bi}=shelter.ui,jn=()=>(()=>{let e=zi.cloneNode(!0);return(0,vt.insert)(e,(0,bt.createComponent)(Di,{get tag(){return Bi.H1},children:"Snazzy Shelter Settings"}),null),(0,vt.insert)(e,(0,bt.createComponent)(In,{items:[{text:"Installed",component:Ir},{text:"Store",component:Cn},{text:"Repos",component:_n},{text:"Quick CSS",component:ln},{text:"Debug",component:Mn}]}),null),e})();var Rn=()=>shelter.settings.registerSection("section","shsnazzy","Themes",jn);var Nn=`
.ysink_stain_card{background:var(--background-secondary-alt);padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;width:100% !important;color:var(--text-normal)}.ysink_stain_title{display:flex;align-items:center;font-size:1rem;color:var(--interactive-active)}.ysink_stain_cardcontainer>*{margin-bottom:.5rem}.ysink_stain_row{display:flex;gap:1rem}.ysink_stain_row>:not(:last-child){flex:1}.ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(255,255,255,.2666666667)}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(0,0,0,.2)}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;background:var(--input-background);color:#fff;border:none;border-radius:3px}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_tcard{display:grid;grid-template-columns:auto 1fr min-content;grid-template-rows:auto 1fr;align-items:center}.ysink_stain_tcard .ysink_stain_tmedia{grid-row:1/3;height:4rem;width:7rem;margin-right:1rem;background-size:cover}.ysink_stain_tcard .ysink_stain_tmedia *{display:flex;justify-content:center;align-items:center;height:100%}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview{z-index:1;transition:opacity 250ms ease;backdrop-filter:brightness(0.3);cursor:pointer}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview:not(:hover){opacity:0}.ysink_stain_tcard .ysink_stain_tdesc{grid-area:2/2}.ysink_stain_tcard .ysink_stain_tacts{grid-column:3;justify-self:right}.ysink_stain_tcard .ysink_stain_tacts>:last-child{margin-left:.25rem}.ysink_stain_tcard .ysink_stain_tacts>*{display:inline-block}.ysink_stain_tcard .ysink_stain_taulic{text-align:right;min-width:8rem}.ysink_stain_iconbtn{margin-right:.25rem;fill:var(--interactive-normal);cursor:pointer;height:22px;width:22px}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#7289da}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}.ysink_stain_officialbadge{display:inline;margin-left:.5rem}.ysink_stain_button{color:#fff !important}#shsnazzy-tab{padding-bottom:0}`;var{plugin:{store:N},ui:{injectCss:Fi}}=shelter;Array.isArray(N.repos)||Mt();Array.isArray(N.themes)||(N.themes=[]);N.css&&(N.quickCSS||(N.quickCSS=N.css),delete N.css);var Hi=[Ot(),jt(),Rt(),Rn(),Fi(Nn)],Wi=()=>_.forEachRight(Hi,e=>e());return Wn(Ui);})();
